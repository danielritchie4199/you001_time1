**검색 키워드 필터창에 입력한 문자열은 서버로 넘어가지?**

편집

네, 맞습니다. 검색 키워드 필터창에 입력한 문자열은 서버로 넘어갑니다.

HTML 파일을 분석한 결과, 다음과 같은 흐름으로 작동함:

## 키워드 전송 과정

1. **사용자 입력**: `<input type="text" id="keyword" name="keyword">` 필드에 키워드 입력
2. **폼 제출**: 검색 버튼 클릭 시 `searchForm` 이벤트 실행
3. **서버 요청**: JavaScript에서 키워드 값을 포함하여 서버에 검색 요청 전송
4. **서버 처리**: 서버에서 키워드를 기반으로 YouTube API 검색 수행
5. **결과 반환**: 서버에서 검색 결과를 클라이언트로 전송

## 현재 상황

- ✅ **키워드는 서버로 전송됨**
- ✅ **서버에서 검색 처리됨**
- ✅ **검색 결과는 클라이언트에 표시됨**
- ❌ **검색 키워드가 결과 화면에 표시되지 않음** ← 이 부분이 수정 필요

## 수정 필요한 부분

현재 HTML에는 검색 키워드 표시용 요소가 있지만 숨겨져 있음:

html

```html
<span id="searchKeywordInfo" style="display: none;">
    <span id="searchKeyword" class="results-count-number"></span>
</span>
```

이 요소를 활성화하여 서버에서 받은 검색 결과와 함께 검색 키워드를 표시하면 됩니다.

재시도

J

그 서버로 넘어간 문자열을 다시 you_list.html 에서 받을려면 어떻게 하면 되지?

편집

서버에서 넘어간 검색 키워드를 다시 클라이언트(you_list.html)에서 받는 방법은 여러 가지가 있습니다.

## 방법 1: 서버 응답에 검색 키워드 포함 (권장)

**서버 측 수정**

javascript

```javascript
// server.js에서 검색 결과 응답 시 키워드도 함께 반환
app.post('/api/search', async (req, res) => {
    const keyword = req.body.keyword;
    // ... 검색 로직 ...

    res.json({
        success: true,
        keyword: keyword,  // 검색 키워드 포함
        results: searchResults,
        totalCount: totalResults
    });
});
```

**클라이언트 측 수정**

javascript

```javascript
// you_list.html에서
async function performSearch() {
    const response = await fetch('/api/search', {
        method: 'POST',
        body: JSON.stringify(searchParams)
    });

    const data = await response.json();

    // 서버에서 받은 키워드로 UI 업데이트
    if (data.keyword && data.keyword.trim()) {
        document.getElementById('searchKeyword').textContent = data.keyword;
        document.getElementById('searchKeywordInfo').style.display = 'inline';
    }
}
```

## 방법 2: 클라이언트에서 키워드 저장 (간단함)

javascript

```javascript
// you_list.html에서 검색 실행 시 키워드 저장
async function performSearch() {
    const keyword = document.getElementById('keyword').value;

    // 검색 실행
    const response = await fetch('/api/search', ...);

    // 검색 완료 후 키워드 표시
    if (keyword && keyword.trim()) {
        document.getElementById('searchKeyword').textContent = keyword.trim();
        document.getElementById('searchKeywordInfo').style.display = 'inline';
    } else {
        document.getElementById('searchKeywordInfo').style.display = 'none';
    }
}
```

## 방법 3: URL 파라미터 활용

javascript

```javascript
// 검색 시 URL 파라미터에 키워드 저장
function performSearch() {
    const keyword = document.getElementById('keyword').value;
    const url = new URL(window.location);
    url.searchParams.set('keyword', keyword);
    window.history.replaceState({}, '', url);

    // 검색 완료 후 URL에서 키워드 읽어서 표시
    displaySearchKeyword();
}

function displaySearchKeyword() {
    const urlParams = new URLSearchParams(window.location.search);
    const keyword = urlParams.get('keyword');

    if (keyword) {
        document.getElementById('searchKeyword').textContent = keyword;
        document.getElementById('searchKeywordInfo').style.display = 'inline';
    }
}
```

## 어떤 방법을 사용하시겠습니까?

1. **방법 2 (클라이언트 저장)**: 가장 간단하고 서버 수정 불필요
2. **방법 1 (서버 응답 포함)**: 가장 안정적이지만 서버 수정 필요
3. **방법 3 (URL 파라미터)**: 브라우저 새로고침 시에도 키워드 유지

현재 상황에서는 **방법 2**가 가장 간단하고 효과적일 것 같습니다. 어떤 방법으로 진행하시겠습니까?

재시도

J

**방법 2 (클라이언트 저장)**: 가장 간단하고 서버 수정 불필요 - 사용

편집

좋습니다! **방법 2 (클라이언트 저장)**로 진행하겠습니다. 서버 수정 없이 클라이언트에서만 검색 키워드를 저장하고 표시하는 기능을 추가하겠습니다.

## 7단계: JavaScript 코드에서 검색 키워드 표시 기능 구현

먼저 JavaScript 코드 부분을 찾아서 수정하겠습니다.

F

Read text file

요청

``{ `head`: 2500, `path`: `H:\\workspace\\you001_time1\\you_list.html` }``

응답

``<!DOCTYPE html> <html lang="ko"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>YouTube 채널 검색 시스템</title> <style> * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f5f5f5; color: #333; line-height: 1.6; } .container { max-width: 1540px; margin: 0 auto; padding: 20px; } .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; margin-bottom: 30px; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.1); } .header h1 { font-size: 2.5em; margin-bottom: 10px; font-weight: 700; } .header p { font-size: 1.1em; opacity: 0.9; } .search-form { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); margin-bottom: 30px; } .form-grid { display: grid; grid-template-columns: 2fr 2.5fr 1.2fr 1fr 1.8fr; grid-template-rows: auto auto; gap: 20px; margin-bottom: 20px; } /* 두 번째 줄 필드들 위치 지정 */ .form-group.second-row { grid-row: 2; } .form-group.second-row:nth-child(6) { grid-column: 1; } /* 카테고리 */ .form-group.second-row:nth-child(7) { grid-column: 2; } /* 검색 결과 수 */ .form-group.second-row:nth-child(8) { grid-column: 3; } /* 업로드 기간 */ .form-group.second-row:nth-child(9) { grid-column: 4 / 6; } /* 업로드 연도 (2칸 차지) */ .form-group { display: flex; flex-direction: column; } .form-group label { font-weight: 600; margin-bottom: 8px; color: #555; font-size: 0.95em; } .form-group input, .form-group select { padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1em; transition: all 0.3s ease; background: white; height: 48px; box-sizing: border-box; } .form-group input:focus, .form-group select:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); } .date-range-container { display: flex; gap: 15px; flex-wrap: nowrap; } .date-input-group { display: flex; flex-direction: column; flex: 1; min-width: 120px; } .date-input-group input[type="date"] { padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1em; transition: all 0.3s ease; width: 100%; background: white; height: 48px; box-sizing: border-box; } .date-input-group input[type="date"]:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); } .checkbox-group { display: flex; gap: 15px; align-items: center; margin-top: 8px; } .checkbox-item { display: flex; align-items: center; gap: 6px; } .checkbox-item input[type="checkbox"] { width: auto; margin: 0; } /* 카테고리 선택기 스타일 */ .category-selector { position: relative; } .category-display { padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; background: white; cursor: pointer; transition: all 0.3s ease; font-size: 1em; user-select: none; height: 48px; box-sizing: border-box; display: flex; align-items: center; } .category-display:hover { border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); } .category-display:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); } .category-dropdown { position: absolute; top: 100%; left: 0; right: 0; background: white; border: 2px solid #667eea; border-radius: 8px; box-shadow: 0 8px 32px rgba(0,0,0,0.15); z-index: 1000; display: none; max-height: 250px; overflow-y: auto; padding: 0; } .category-dropdown.show { display: block; } .category-header { padding: 0; background: #f8f9fa; border-bottom: 1px solid #e9ecef; display: flex; align-items: center; gap: 8px; font-weight: 600; min-height: 0; } .category-header input[type="checkbox"] { transform: scale(1.1); } .category-header label { cursor: pointer; user-select: none; margin: 0; } .category-options { max-height: 250px; overflow-y: auto; padding: 0; } .category-item { padding: 0px 10px !important; display: flex; align-items: center; gap: 8px; transition: background-color 0.2s ease; border-bottom: 1px solid #f8f9fa; line-height: 1.0 !important; min-height: 20px !important; } .category-item:hover { background: #e3f2fd; } .category-item:last-child { border-bottom: none; } .category-item input[type="checkbox"] { transform: scale(1.05); margin: 0; } .category-item label { cursor: pointer; user-select: none; margin: 0; font-size: 0.95em; } .category-item input[type="checkbox"]:checked + label { color: #667eea; font-weight: 500; } /* 동영상 길이 섹션 스타일 */ .video-length-section { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 25px; } .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; } .section-label { font-weight: 600; font-size: 1.1em; color: #333; margin: 0; } .select-controls { display: flex; gap: 20px; align-items: center; flex-wrap: wrap; } .select-all-container, .select-group-container { display: flex; align-items: center; gap: 8px; font-size: 0.9em; color: #555; } .select-all-container input[type="checkbox"], .select-group-container input[type="checkbox"] { transform: scale(1.1); cursor: pointer; } .select-all-container label, .select-group-container label { cursor: pointer; font-weight: 500; user-select: none; } .select-group-container { font-size: 0.85em; color: #666; } .video-length-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; align-items: start; } .video-length-grid .checkbox-item { display: flex; align-items: flex-start; gap: 10px; padding: 15px; border: 2px solid #e1e5e9; border-radius: 12px; transition: all 0.3s ease; background: #f8f9fa; } .video-length-grid .checkbox-item:hover { border-color: #667eea; background: #f0f2ff; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15); } .video-length-grid .checkbox-item input[type="checkbox"]:checked + label { color: #667eea; font-weight: 600; } .video-length-grid .checkbox-item input[type="checkbox"] { margin-top: 4px; transform: scale(1.2); } .video-length-grid .checkbox-item label { font-weight: 500; font-size: 1em; line-height: 1.4; cursor: pointer; } .duration-desc { font-size: 0.85em; color: #666; font-weight: 400; } .search-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 40px; border-radius: 50px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: block; margin: 20px auto 0; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); } .search-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); } .search-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; } .loading { text-align: center; padding: 40px; font-size: 1.2em; color: #666; } .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #667eea; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 20px auto; } @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } .results-container { background: white; border-radius: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); overflow: hidden; } .results-header { background: #f8f9fa; padding: 20px; border-bottom: 1px solid #e9ecef; display: grid; grid-template-columns: 1fr auto auto; align-items: center; gap: 20px; } .results-info { display: flex; align-items: center; gap: 30px; } .datetime-display { position: relative; width: 76px; height: 76px; flex-shrink: 0; } .analog-clock { width: 76px; height: 76px; border: 3px solid #8B4513; border-radius: 50%; background: white; position: relative; box-shadow: 0 2px 8px rgba(0,0,0,0.15); } .clock-center { position: absolute; top: 50%; left: 50%; width: 4px; height: 4px; background: #333; border-radius: 50%; transform: translate(-50%, -50%); z-index: 4; } .clock-numbers { position: absolute; top: 0; left: 0; width: 100%; height: 100%; font-size: 10px; font-weight: bold; color: #333; } .clock-number { position: absolute; width: 16px; height: 16px; text-align: center; line-height: 16px; } .clock-number.n12 { top: 2px; left: 50%; transform: translateX(-50%); } .clock-number.n3 { top: 50%; right: 2px; transform: translateY(-50%); } .clock-number.n6 { bottom: 2px; left: 50%; transform: translateX(-50%); } .clock-number.n9 { top: 50%; left: 2px; transform: translateY(-50%); } .clock-hand { position: absolute; background: #333; transform-origin: bottom center; border-radius: 2px; } .hour-hand { width: 3px; height: 22px; top: 16px; left: 50%; margin-left: -1.5px; z-index: 3; } .minute-hand { width: 2px; height: 30px; top: 8px; left: 50%; margin-left: -1px; z-index: 2; } .second-hand { width: 1px; height: 32px; top: 6px; left: 50%; margin-left: -0.5px; background: #ff0000; z-index: 1; } .search-results-info { font-weight: 600; color: #495057; } .results-count-number { color: red; font-size: 1.6em; font-weight: bold; margin-right: 4px; } .results-controls { display: flex; align-items: center; gap: 20px; flex-wrap: wrap; width: 280px; flex-shrink: 0; } .excel-download-container { display: flex; justify-content: flex-end; align-items: center; width: 80px; flex-shrink: 0; } .pagination-controls { display: flex; align-items: center; gap: 15px; } .pagination-controls select { padding: 8px 12px; border: 1px solid #ced4da; border-radius: 6px; background: white; } .excel-download-btn { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 0.9em; width: 60px; min-width: 60px; max-width: 60px; text-align: center; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3); display: flex; align-items: center; justify-content: center; gap: 0px; } .excel-download-btn:hover { background: linear-gradient(135deg, #218838 0%, #1ea085 100%); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4); } .excel-download-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; } .table-container { overflow-x: auto; } .results-table { width: 100%; border-collapse: collapse; background: white; table-layout: fixed; /* 컬럼 width 고정 */ } /* 각 컬럼의 고정 width 설정 (14개 컬럼) */ .results-table th:nth-child(1), .results-table td:nth-child(1) { width: 85px; /* 썸네일 */ } .results-table th:nth-child(2), .results-table td:nth-child(2) { width: 160px; /* 채널명 */ } .results-table th:nth-child(3), .results-table td:nth-child(3) { width: 345px; /* 영상제목 (가장 넓게) */ } .results-table th:nth-child(4), .results-table td:nth-child(4) { width: 110px; /* 카테고리 */ } .results-table th:nth-child(5), .results-table td:nth-child(5) { width: 85px; /* 국가 */ } .results-table th:nth-child(6), .results-table td:nth-child(6) { width: 100px; /* 업로드일 */ } .results-table th:nth-child(7), .results-table td:nth-child(7) { width: 120px; /* 한국시간 */ } .results-table th:nth-child(8), .results-table td:nth-child(8) { width: 80px; /* 좋아요 */ } .results-table th:nth-child(9), .results-table td:nth-child(9) { width: 90px; /* 조회수 */ } .results-table th:nth-child(10), .results-table td:nth-child(10) { width: 85px; /* 구독자 */ } .results-table th:nth-child(11), .results-table td:nth-child(11) { width: 85px; /* RPM */ } .results-table th:nth-child(12), .results-table td:nth-child(12) { width: 50px; /* 동영상 링크 */ } .results-table th:nth-child(13), .results-table td:nth-child(13) { width: 85px; /* 재생시간 */ } .results-table th:nth-child(14), .results-table td:nth-child(14) { width: 60px; /* 썸네일 다운로드 */ } .results-table th { background: #667eea; color: white; padding: 15px 12px; text-align: center; font-weight: 600; cursor: pointer; user-select: none; transition: background-color 0.6s ease; position: relative; font-size: 1.4em; } .results-table th:hover { background: #7b8af0; } .results-table th.sortable::after { content: " ↕"; font-size: 0.8em; opacity: 0.6; } /* RPM 컬럼 화살표 강제 표시 - 개선된 버전 */ .results-table th[data-sort="estimated_rpm"]::after { content: " ↕" !important; font-size: 0.8em !important; opacity: 0.6 !important; display: inline !important; visibility: visible !important; } .results-table th[data-sort="estimated_rpm"].sort-asc::after { content: " ↑" !important; opacity: 1 !important; } .results-table th[data-sort="estimated_rpm"].sort-desc::after { content: " ↓" !important; opacity: 1 !important; } .sort-icon { cursor: pointer; margin: 0 2px; transition: transform 0.2s ease; position: relative; } .sort-icon::after { content: "↕"; font-size: 0.8em; opacity: 0.6; margin-left: 1px; } .sort-icon:hover { transform: scale(1.2); } /* 채널명 컬럼은 개별 이모지에만 화살표 표시 */ .sortable.multi-sort::after { display: none; } .results-table th.sort-asc::after { content: " ↑"; opacity: 1; } .results-table th.sort-desc::after { content: " ↓"; opacity: 1; } .results-table td { padding: 12px; border-bottom: 1px solid #e9ecef; vertical-align: middle; } .results-table tr:nth-child(even) { background-color: #f8f9fa; } .results-table tr:hover { background-color: #e3f2fd; } .thumbnail { width: 80px; height: 60px; object-fit: cover; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); } .video-title { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; line-clamp: 2; /* 표준 CSS 추가 */ overflow: hidden; text-overflow: ellipsis; line-height: 1.4em; max-height: 2.8em; /* line-height × 2 */ word-break: break-word; hyphens: auto; } .channel-name { font-weight: 600; color: #495057; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; width: 100%; transition: color 0.2s ease, font-weight 0.2s ease; } /* 브랜드 채널 스타일 */ .channel-name.brand-channel { color: #A0522D !important; /* 조금 옅은 brown 색상 */ } .channel-link { color: #667eea; text-decoration: none; display: block; width: 100%; } .channel-link:hover { text-decoration: none; } .channel-link:hover .channel-name { color: #ff1493; font-weight: bold; text-decoration: none; transition: color 0.2s ease, font-weight 0.2s ease; } .channel-link:active .channel-name { color: #ff1493; font-weight: bold; } /* 채널 개설일 표시 스타일 (새 기능) */ .channel-created-date { color: #0066ff !important; font-weight: bold !important; font-size: 0.85em; margin-top: 2px; display: block; text-decoration: none; } .channel-link:hover .channel-created-date { color: #0066ff !important; text-decoration: none; } .channel-link:active .channel-created-date { color: #0066ff !important; text-decoration: none; } .view-count { font-weight: 600; color: #28a745; text-align: right; display: block; } .subscriber-count { font-weight: 600; color: #dc3545; text-align: center; display: block; } .duration-time { font-family: 'Courier New', monospace; font-weight: 600; color: #6c757d; background: #f8f9fa; padding: 2px 4px; border-radius: 3px; font-size: 11px; } /* 재생시간 백분율 스타일 */ .duration-percentage { color: blue; font-weight: bold; font-size: 11px; text-align: center; display: block; margin-top: 2px; } .like-count { font-weight: bold; text-align: center; display: block; font-size: 11px; } /* 실제 좋아요 개수 (빨간색) */ .like-count-actual { color: #e91e63; } /* 추정 좋아요 개수 (파란색) */ .like-count-estimated { color: #2196f3; } /* RPM 컬럼 스타일 */ .rpm-estimate { font-weight: bold; text-align: center; display: block; font-size: 11px; color: brown; } /* 카테고리 컬럼 스타일 */ .category-name { font-weight: bold; text-align: center; margin-bottom: 4px; } .channel-rpm-info { text-align: center; } .channel-rpm-info .rpm-estimate { font-size: 13px; color: brown; } /* 국가 컬럼 스타일 */ .country-name { font-weight: bold; text-align: center; margin-bottom: 4px; } .country-rpm-info { text-align: center; } .country-rpm-info .rpm-estimate { font-size: 13px; color: brown; } /* 조회수 컬럼 스타일 */ .view-count { text-align: center; margin-bottom: 4px; } .valid-view-count { text-align: center; } .valid-view-value { color: red; font-weight: bold; } /* 좋아요 컬럼 스타일 */ .like-count-container { text-align: center; } .like-count-bold { font-weight: bold; margin-bottom: 4px; } .like-percentage { text-align: center; } .percentage-value { color: blue; font-weight: bold; } /* 좋아요 백분율 스타일 */ .like-percentage-display { color: blue; font-weight: bold; font-size: 11px; text-align: center; display: block; margin-top: 2px; } /* RPM 컬럼 스타일 */ .rpm-container { text-align: center; } .rpm-estimate { font-weight: bold; text-align: center; display: block; font-size: 11px; color: brown; margin-bottom: 4px; } .rpm-total { text-align: center; } .rpm-total-value { color: red; font-weight: bold; font-size: 11px; } .video-link { color: #667eea; text-decoration: none; font-weight: 500; display: block; text-align: center; } .video-link:hover { text-decoration: none; } .download-btn { background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85em; transition: background-color 0.3s ease; } .download-btn:hover { background: #218838; } .pagination { display: flex; justify-content: center; align-items: center; padding: 20px; gap: 10px; } .pagination button { padding: 8px 16px; border: 1px solid #ced4da; background: white; cursor: pointer; border-radius: 4px; transition: all 0.3s ease; } .pagination button:hover:not(:disabled) { background: #667eea; color: white; border-color: #667eea; } .pagination button:disabled { opacity: 0.5; cursor: not-allowed; } .pagination button.active { background: #667eea; color: white; border-color: #667eea; } .page-info { margin: 0 15px; font-weight: 500; } .error-message { background: #f8d7da; color: #721c24; padding: 15px; border-radius: 8px; margin: 20px 0; border: 1px solid #f5c6cb; } .no-results { text-align: center; padding: 60px 20px; color: #6c757d; } .no-results h3 { margin-bottom: 10px; color: #495057; } /* 업로드 날짜 컬럼 두 줄 표시 */ .upload-date { display: flex; flex-direction: column; align-items: center; line-height: 1.2; } .upload-date .year { font-weight: 600; font-size: 0.9em; color: #333; } .upload-date .month-day { font-weight: 600; font-size: 0.9em; color: #333; margin-top: 2px; } @media (max-width: 1024px) { .form-grid { grid-template-columns: 1fr 1fr 1fr; grid-template-rows: auto auto auto; gap: 15px; } .form-group.second-row:nth-child(6) { grid-column: 1; grid-row: 2; } .form-group.second-row:nth-child(7) { grid-column: 2; grid-row: 2; } .form-group.second-row:nth-child(8) { grid-column: 3; grid-row: 2; } .form-group.second-row:nth-child(9) { grid-column: 1 / 4; grid-row: 3; } } @media (max-width: 768px) { .container { padding: 10px; } .header h1 { font-size: 2em; } .form-grid { grid-template-columns: 1fr; grid-template-rows: repeat(9, auto); } .form-group.second-row { grid-column: 1; grid-row: auto; } .results-header { flex-direction: column; align-items: stretch; } .results-controls { flex-direction: column; gap: 15px; } .pagination-controls { justify-content: center; } .excel-download-btn { align-self: center; width: fit-content; } .results-table { font-size: 0.9em; } .thumbnail { width: 60px; height: 45px; } .video-length-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; } .video-length-grid .checkbox-item { padding: 12px; } /* 모바일에서 컬럼 width 재조정 (13개 컬럼) */ .results-table th:nth-child(1), .results-table td:nth-child(1) { width: 70px; /* 썸네일 */ } .results-table th:nth-child(2), .results-table td:nth-child(2) { width: 120px; /* 채널명 */ } .results-table th:nth-child(3), .results-table td:nth-child(3) { width: 200px; /* 영상제목 */ } .results-table th:nth-child(4), .results-table td:nth-child(4) { width: 100px; /* 카테고리 */ } .results-table th:nth-child(5), .results-table td:nth-child(5) { width: 80px; /* 업로드일 */ } .results-table th:nth-child(6), .results-table td:nth-child(6) { width: 50px; /* 좋아요 */ } .results-table th:nth-child(7), .results-table td:nth-child(7) { width: 90px; /* 조회수 */ } .results-table th:nth-child(8), .results-table td:nth-child(8) { width: 70px; /* 구독자 */ } .results-table th:nth-child(9), .results-table td:nth-child(9) { width: 50px; /* 링크 */ } .results-table th:nth-child(10), .results-table td:nth-child(10) { width: 70px; /* 재생시간 */ } .results-table th:nth-child(11), .results-table td:nth-child(11) { width: 50px; /* 썸네일 다운로드 */ } } /* 듀얼 타임존 컬럼 스타일 */ .upload-date.home-icon { display: flex; justify-content: center; align-items: center; font-size: 1.2em; } .upload-date.home-icon span { cursor: help; } /* 상세 시간 표시 스타일 */ .upload-date.detailed-time { text-align: left; line-height: 1.2; } .upload-date.detailed-time .date-part { font-size: 0.9em; font-weight: bold; color: #333; } .upload-date.detailed-time .time-part { font-size: 0.8em; /* color: #666; */ /* 기존 색상 주석 처리 - 자식 요소가 색상 제어 */ font-weight: normal; margin-top: 2px; position: relative; } .upload-date.detailed-time .time-part .weekday { color: black; font-weight: bold; } .upload-date.detailed-time .time-part .time-only { color: red; font-weight: bold; } .upload-date.detailed-time .time-part .timezone { color: black; font-weight: bold; } /* 개선된 시간 표시 스타일 - 우선순위 강화 */ .upload-date.detailed-time .time-part .time-display { display: inline !important; } .upload-date.detailed-time .time-part .time-display .weekday-bold { color: blue !important; font-weight: bold !important; } .upload-date.detailed-time .time-part .time-display .time-red-bold { color: red !important; font-weight: bold !important; } .upload-date.detailed-time .time-part .time-display .timezone-bold { color: blue !important; font-weight: bold !important; } /* 상위 요소에서 색상 상속 방지 */ .results-table td .upload-date.detailed-time .time-part { color: inherit !important; /* 기본 색상 상속 방지 */ } .results-table td .upload-date.detailed-time .time-part * { color: inherit !important; /* 모든 자식 요소에 적용 */ } /* 시간 표시 전용 스타일 - 최고 우선순위 */ .results-table .time-display .weekday-bold, td .time-display .weekday-bold { color: blue !important; font-weight: bold !important; } .results-table .time-display .time-red-bold, td .time-display .time-red-bold { color: red !important; font-weight: bold !important; } .results-table .time-display .timezone-bold, td .time-display .timezone-bold { color: blue !important; font-weight: bold !important; } /* 한국시간 컬럼 헤더는 기본 테이블 헤더 스타일 사용 */ /* 고정 컬럼 크기 스타일 */ .results-table { table-layout: fixed; width: 100%; } .results-table th, .results-table td { height: 60px; vertical-align: middle; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding: 8px; } /* 각 컬럼별 고정 너비 */ .results-table th:nth-child(1), /* 썸네일 */ .results-table td:nth-child(1) { width: 80px; } .results-table th:nth-child(2), /* 채널명 */ .results-table td:nth-child(2) { width: 150px; } .results-table th:nth-child(3), /* 영상제목 */ .results-table td:nth-child(3) { width: 250px; white-space: normal; line-height: 1.3; } .results-table th:nth-child(4), /* 카테고리 */ .results-table td:nth-child(4) { width: 120px; } .results-table th:nth-child(5), /* 국가 */ .results-table td:nth-child(5) { width: 80px; } .results-table th:nth-child(6), /* 업로드일 */ .results-table td:nth-child(6) { width: 90px; } .results-table th:nth-child(7), /* 한국시간 */ .results-table td:nth-child(7) { width: 120px; } .results-table th:nth-child(8), /* 좋아요 */ .results-table td:nth-child(8) { width: 60px; } .results-table th:nth-child(9), /* 조회수 */ .results-table td:nth-child(9) { width: 90px; } .results-table th:nth-child(10), /* 구독자 */ .results-table td:nth-child(10) { width: 80px; } .results-table th:nth-child(11), /* RPM */ .results-table td:nth-child(11) { width: 85px; } .results-table th:nth-child(12), /* 재생시간 */ .results-table td:nth-child(12) { width: 70px; } .results-table th:nth-child(13), /* 다운로드 */ .results-table td:nth-child(13) { width: 60px; } /* 국가 컬럼 스타일 */ .country-name { font-size: 0.9em; font-weight: 500; color: #444; text-align: center; display: block; } /* 결과내 재검색 필터 스타일 */ .results-filter-container { background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border: 2px solid #dee2e6; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); } .filter-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px 10px 0 0; } .filter-header h3 { margin: 0; font-size: 1.1em; font-weight: 600; } .toggle-filter-btn { background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85em; transition: all 0.3s ease; } .toggle-filter-btn:hover { background: rgba(255,255,255,0.3); } .filter-content { padding: 20px; } .filter-stats { background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #667eea; } .filter-stats p { margin: 0; color: #495057; font-weight: 500; } .timezone-filter-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; } .filter-group { background: white; padding: 15px; border-radius: 8px; border: 1px solid #e9ecef; transition: all 0.3s ease; } .filter-group:hover { border-color: #667eea; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1); } .filter-group h4 { margin: 0 0 10px 0; font-size: 0.9em; color: #495057; font-weight: 600; } .filter-group label { display: flex; align-items: center; cursor: pointer; font-weight: 500; color: #6c757d; } .filter-group input[type="checkbox"] { margin-right: 8px; transform: scale(1.1); } .filter-group span { font-size: 0.85em; color: #667eea; font-weight: 600; } .filter-actions { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; } .apply-filter-btn { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; } .apply-filter-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3); } .reset-filter-btn { background: linear-gradient(135deg, #6c757d 0%, #495057 100%); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; } .reset-filter-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3); } .best-times-btn { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; } .best-times-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3); } #filteredResultsInfo { color: #667eea; font-weight: 600; margin-left: 10px; } .filter-content.collapsed { display: none; } @media (max-width: 768px) { .timezone-filter-grid { grid-template-columns: 1fr; } .filter-actions { flex-direction: column; align-items: stretch; } .filter-header { flex-direction: column; gap: 10px; text-align: center; } } </style> </head> <body> <div class="container"> <div class="header"> <h1>🎥 YouTube Search</h1> <p>전세계 유튜브 채널에서 원하는 동영상을 찾아봅니다</p> </div> <form class="search-form" id="searchForm"> <div class="form-grid"> <div class="form-group"> <label for="country">국가 선택 (50개국 글로벌 커버리지)</label> <div class="category-selector"> <div class="category-display" id="countryDisplay" tabindex="0">대한민국 선택됨</div> <div class="category-dropdown" id="countryDropdown"> <div class="category-header"> </div> <div class="category-options"> <!-- 전세계 옵션 추가 --> <div class="category-item"> <input type="radio" id="country_WORLD" name="country" value="worldwide"> <label for="country_WORLD">🌍 전세계</label> </div> <!-- 1. 모든 국가 (최상단) <div class="category-item"> <input type="radio" id="country_WORLD" name="country" value="worldwide"> <label for="country_WORLD">🌍 모든 국가</label> </div> --> <!-- 2. 대한민국 (두 번째) --> <div class="category-item"> <input type="radio" id="country_KR" name="country" value="korea" checked> <label for="country_KR">🇰🇷 대한민국</label> </div> <!-- 3. RPM 순위 1위: 호주 --> <div class="category-item"> <input type="radio" id="country_AU" name="country" value="australia"> <label for="country_AU">🇦🇺 호주</label> </div> <!-- 4. RPM 순위 2위: 미국 --> <div class="category-item"> <input type="radio" id="country_US" name="country" value="usa"> <label for="country_US">🇺🇸 미국</label> </div> <!-- 5. RPM 순위 3위: 캐나다 --> <div class="category-item"> <input type="radio" id="country_CA" name="country" value="canada"> <label for="country_CA">🇨🇦 캐나다</label> </div> <!-- 6. RPM 순위 4위: 뉴질랜드 --> <div class="category-item"> <input type="radio" id="country_NZ" name="country" value="newzealand"> <label for="country_NZ">🇳🇿 뉴질랜드</label> </div> <!-- 7. RPM 순위 5위: 스위스 --> <div class="category-item"> <input type="radio" id="country_CH" name="country" value="switzerland"> <label for="country_CH">🇨🇭 스위스</label> </div> <!-- 8. RPM 순위 6위: 영국 --> <div class="category-item"> <input type="radio" id="country_GB" name="country" value="uk"> <label for="country_GB">🇬🇧 영국</label> </div> <!-- 9. RPM 순위 7위: 노르웨이 --> <div class="category-item"> <input type="radio" id="country_NO" name="country" value="norway"> <label for="country_NO">🇳🇴 노르웨이</label> </div> <!-- 10. RPM 순위 8위: 독일 --> <div class="category-item"> <input type="radio" id="country_DE" name="country" value="germany"> <label for="country_DE">🇩🇪 독일</label> </div> <!-- 11. RPM 순위 9위: 아일랜드 --> <div class="category-item"> <input type="radio" id="country_IE" name="country" value="ireland"> <label for="country_IE">🇮🇪 아일랜드</label> </div> <!-- 12. RPM 순위 10위: 네덜란드 --> <div class="category-item"> <input type="radio" id="country_NL" name="country" value="netherlands"> <label for="country_NL">🇳🇱 네덜란드</label> </div> <!-- 13. RPM 순위 11위: 덴마크 --> <div class="category-item"> <input type="radio" id="country_DK" name="country" value="denmark"> <label for="country_DK">🇩🇰 덴마크</label> </div> <!-- 14. RPM 순위 12위: 홍콩 --> <div class="category-item"> <input type="radio" id="country_HK" name="country" value="hongkong"> <label for="country_HK">🇭🇰 홍콩</label> </div> <!-- 15. RPM 순위 13위: 스웨덴 --> <div class="category-item"> <input type="radio" id="country_SE" name="country" value="sweden"> <label for="country_SE">🇸🇪 스웨덴</label> </div> <!-- 16. RPM 순위 14위: 핀란드 --> <div class="category-item"> <input type="radio" id="country_FI" name="country" value="finland"> <label for="country_FI">🇫🇮 핀란드</label> </div> <!-- 17. RPM 순위 15위: 싱가포르 --> <div class="category-item"> <input type="radio" id="country_SG" name="country" value="singapore"> <label for="country_SG">🇸🇬 싱가포르</label> </div> <!-- 18. RPM 순위 16위: 오스트리아 --> <div class="category-item"> <input type="radio" id="country_AT" name="country" value="austria"> <label for="country_AT">🇦🇹 오스트리아</label> </div> <!-- 19. RPM 순위 17위: 룩셈부르크 --> <div class="category-item"> <input type="radio" id="country_LU" name="country" value="luxembourg"> <label for="country_LU">🇱🇺 룩셈부르크</label> </div> <!-- 20. RPM 순위 18위: 벨기에 --> <div class="category-item"> <input type="radio" id="country_BE" name="country" value="belgium"> <label for="country_BE">🇧🇪 벨기에</label> </div> <!-- 21. RPM 순위 19위: 프랑스 --> <div class="category-item"> <input type="radio" id="country_FR" name="country" value="france"> <label for="country_FR">🇫🇷 프랑스</label> </div> <!-- 22. RPM 순위 20위: 이탈리아 --> <div class="category-item"> <input type="radio" id="country_IT" name="country" value="italy"> <label for="country_IT">🇮🇹 이탈리아</label> </div> <!-- 23. RPM 순위 21위: 스페인 --> <div class="category-item"> <input type="radio" id="country_ES" name="country" value="spain"> <label for="country_ES">🇪🇸 스페인</label> </div> <!-- 24. RPM 순위 22위: 체코 --> <div class="category-item"> <input type="radio" id="country_CZ" name="country" value="czechrepublic"> <label for="country_CZ">🇨🇿 체코</label> </div> <!-- 25. RPM 순위 23위: 이스라엘 --> <div class="category-item"> <input type="radio" id="country_IL" name="country" value="israel"> <label for="country_IL">🇮🇱 이스라엘</label> </div> <!-- 26. RPM 순위 24위: 포르투갈 --> <div class="category-item"> <input type="radio" id="country_PT" name="country" value="portugal"> <label for="country_PT">🇵🇹 포르투갈</label> </div> <!-- 27. RPM 순위 25위: 일본 --> <div class="category-item"> <input type="radio" id="country_JP" name="country" value="japan"> <label for="country_JP">🇯🇵 일본</label> </div> <!-- 28. RPM 순위 26위: 아랍에미리트 --> <div class="category-item"> <input type="radio" id="country_AE" name="country" value="uae"> <label for="country_AE">🇦🇪 아랍에미리트</label> </div> <!-- 29. RPM 순위 27위: 카타르 --> <div class="category-item"> <input type="radio" id="country_QA" name="country" value="qatar"> <label for="country_QA">🇶🇦 카타르</label> </div> <!-- 30. RPM 순위 28위: ��웨이트 --> <div class="category-item"> <input type="radio" id="country_KW" name="country" value="kuwait"> <label for="country_KW">🇰🇼 쿠웨이트</label> </div> <!-- 31. RPM 순위 29위: 사우디아라비아 --> <div class="category-item"> <input type="radio" id="country_SA" name="country" value="saudi"> <label for="country_SA">🇸🇦 사우디아라비아</label> </div> <!-- 32. RPM 순위 30위: 브라질 --> <div class="category-item"> <input type="radio" id="country_BR" name="country" value="brazil"> <label for="country_BR">🇧🇷 브라질</label> </div> <!-- 33. RPM 순위 31위: 폴란드 --> <div class="category-item"> <input type="radio" id="country_PL" name="country" value="poland"> <label for="country_PL">🇵🇱 폴란드</label> </div> <!-- 34. RPM 순위 32위: 남아프리카공화국 --> <div class="category-item"> <input type="radio" id="country_ZA" name="country" value="southafrica"> <label for="country_ZA">🇿🇦 남아프리카공화국</label> </div> <!-- 35. RPM 순위 33위: 터키 --> <div class="category-item"> <input type="radio" id="country_TR" name="country" value="turkey"> <label for="country_TR">🇹🇷 터키</label> </div> <!-- 36. RPM 순위 35위: 헝가리 --> <div class="category-item"> <input type="radio" id="country_HU" name="country" value="hungary"> <label for="country_HU">🇭🇺 헝가리</label> </div> <!-- 37. RPM 순위 36위: 수리남 --> <div class="category-item"> <input type="radio" id="country_SR" name="country" value="suriname"> <label for="country_SR">🇸🇷 수리남</label> </div> <!-- 38. RPM 순위 37위: 멕시코 --> <div class="category-item"> <input type="radio" id="country_MX" name="country" value="mexico"> <label for="country_MX">🇲🇽 멕시코</label> </div> <!-- 39. RPM 순위 38위: 콜롬비아 --> <div class="category-item"> <input type="radio" id="country_CO" name="country" value="colombia"> <label for="country_CO">🇨🇴 콜롬비아</label> </div> <!-- 40. RPM 순위 39위: 아르헨티나 --> <div class="category-item"> <input type="radio" id="country_AR" name="country" value="argentina"> <label for="country_AR">🇦🇷 아르헨티나</label> </div> <!-- 41. RPM 순위 40위: 모잠비크 --> <div class="category-item"> <input type="radio" id="country_MZ" name="country" value="mozambique"> <label for="country_MZ">🇲🇿 모잠비크</label> </div> <!-- 42. RPM 순위 41위: 인도네시아 --> <div class="category-item"> <input type="radio" id="country_ID" name="country" value="indonesia"> <label for="country_ID">🇮🇩 인도네시아</label> </div> <!-- 43. RPM 순위 42위: 베트남 --> <div class="category-item"> <input type="radio" id="country_VN" name="country" value="vietnam"> <label for="country_VN">🇻🇳 베트남</label> </div> <!-- 44. RPM 순위 43위: 인도 --> <div class="category-item"> <input type="radio" id="country_IN" name="country" value="india"> <label for="country_IN">🇮🇳 인도</label> </div> <!-- 45. RPM 순위 44위: 파키스탄 --> <div class="category-item"> <input type="radio" id="country_PK" name="country" value="pakistan"> <label for="country_PK">🇵🇰 파키스탄</label> </div> <!-- 46. RPM 순위 45위: 방글라데시 --> <div class="category-item"> <input type="radio" id="country_BD" name="country" value="bangladesh"> <label for="country_BD">🇧🇩 방글라데시</label> </div> <!-- 47. RPM 순위 46위: 자메이카 --> <div class="category-item"> <input type="radio" id="country_JM" name="country" value="jamaica"> <label for="country_JM">🇯🇲 자메이카</label> </div> <!-- 48. RPM 순위 47위: 리비아 --> <div class="category-item"> <input type="radio" id="country_LY" name="country" value="libya"> <label for="country_LY">🇱🇾 리비아</label> </div> <!-- 49. RPM 순위 48위: 아이슬란드 --> <div class="category-item"> <input type="radio" id="country_IS" name="country" value="iceland"> <label for="country_IS">🇮🇸 아이슬란드</label> </div> <!-- 50. RPM 순위 49위: 스리랑카 --> <div class="category-item"> <input type="radio" id="country_LK" name="country" value="srilanka"> <label for="country_LK">🇱🇰 스리랑카</label> </div> <!-- 51. RPM 순위 50위: 중국 --> <div class="category-item"> <input type="radio" id="country_CN" name="country" value="china"> <label for="country_CN">🇨🇳 중국</label> </div> </div> </div> </div> </div> <div class="form-group"> <label for="keyword">검색 키워드</label> <input type="text" id="keyword" name="keyword" placeholder="키워드 입력 (비워두면 인기 동영상 검색)"> </div> <div class="form-group" style="flex: 0 0 calc(10% - 10px); min-width: 100px;"> <label for="searchScope">검색 범위</label> <div class="category-selector"> <div class="category-display" id="searchScopeDisplay">영상제목 선택됨</div> <div class="category-dropdown" id="searchScopeDropdown"> <div class="category-header"> <input type="checkbox" id="selectAllSearchScope"> <label for="selectAllSearchScope">모든 범위</label> </div> <div class="category-options"> <div class="category-item"> <input type="checkbox" id="searchTitle" name="searchScope" value="title" checked> <label for="searchTitle">영상제목</label> </div> <div class="category-item"> <input type="checkbox" id="searchChannel" name="searchScope" value="channel"> <label for="searchChannel">채널명</label> </div> <div class="category-item"> <input type="checkbox" id="searchTags" name="searchScope" value="tags"> <label for="searchTags">태그</label> </div> </div> </div> </div> </div> <div class="form-group" style="flex: 0 0 calc(10% - 10px); min-width: 120px;"> <label for="minAvgWatchRate">최소평균시청률</label> <input type="number" id="minAvgWatchRate" name="minAvgWatchRate" min="0" max="100" step="0.1" placeholder="±15-25%"> </div> <div class="form-group"> <label for="viewRange">조회수</label> <div class="date-range-container"> <div class="date-input-group"> <input type="number" id="minViews" name="minViews" value="100000" placeholder="최소 조회수" /> </div> <div class="date-input-group"> <input type="number" id="maxViews" name="maxViews" placeholder="최대 조회수" /> </div> </div> </div> <div class="form-group second-row"> <label for="categories">카테고리</label> <div class="category-selector"> <div class="category-display" id="categoryDisplay" tabindex="0">모든 카테고리 선택됨</div> <div class="category-dropdown" id="categoryDropdown"> <div class="category-header"> <input type="checkbox" id="selectAllCategories" checked> <label for="selectAllCategories">모든 카테고리</label> </div> <div class="category-options"> <div class="category-item"> <input type="checkbox" id="cat1" name="categories" value="1" checked> <label for="cat1">Film & Animation</label> </div> <div class="category-item"> <input type="checkbox" id="cat2" name="categories" value="2" checked> <label for="cat2">Autos & Vehicles</label> </div> <div class="category-item"> <input type="checkbox" id="cat10" name="categories" value="10" checked> <label for="cat10">Music</label> </div> <div class="category-item"> <input type="checkbox" id="cat15" name="categories" value="15" checked> <label for="cat15">Pets & Animals</label> </div> <div class="category-item"> <input type="checkbox" id="cat17" name="categories" value="17" checked> <label for="cat17">Sports</label> </div> <div class="category-item"> <input type="checkbox" id="cat19" name="categories" value="19" checked> <label for="cat19">Travel & Events</label> </div> <div class="category-item"> <input type="checkbox" id="cat20" name="categories" value="20" checked> <label for="cat20">Gaming</label> </div> <div class="category-item"> <input type="checkbox" id="cat22" name="categories" value="22" checked> <label for="cat22">People & Blogs</label> </div> <div class="category-item"> <input type="checkbox" id="cat23" name="categories" value="23" checked> <label for="cat23">Comedy</label> </div> <div class="category-item"> <input type="checkbox" id="cat24" name="categories" value="24" checked> <label for="cat24">Entertainment</label> </div> <div class="category-item"> <input type="checkbox" id="cat25" name="categories" value="25" checked> <label for="cat25">News & Politics</label> </div> <div class="category-item"> <input type="checkbox" id="cat26" name="categories" value="26" checked> <label for="cat26">Howto & Style</label> </div> <div class="category-item"> <input type="checkbox" id="cat27" name="categories" value="27" checked> <label for="cat27">Education</label> </div> <div class="category-item"> <input type="checkbox" id="cat28" name="categories" value="28" checked> <label for="cat28">Science & Technology</label> </div> <div class="category-item"> <input type="checkbox" id="cat29" name="categories" value="29" checked> <label for="cat29">Nonprofits & Activism</label> </div> </div> </div> </div> </div> <div class="form-group second-row"> <label for="maxResults">검색 결과 수</label> <select id="maxResults" name="maxResults"> <option value="10">10건 (최소)</option> <option value="20" selected>20건 (기본)</option> <option value="30">30건 (적음)</option> <option value="40">40건 (소량)</option> <option value="50">50건 (적당)</option> <option value="60">60건 (quota 절약)</option> <option value="100">100건 (균형)</option> <option value="150">150건 (많음)</option> <option value="200">200건 (최대)</option> </select> </div> <div class="form-group second-row"> <label for="uploadPeriod">업로드 기간</label> <select id="uploadPeriod" name="uploadPeriod"> <option value="">전체 기간</option> <option value="1day">1일(⏫24시간내10만)</option> <option value="2days">2일(⏫실시간떡상중)</option> <option value="3days">3일(⏫떡상중)</option> <option value="1week">1주일</option> <option value="2weeks">2주일</option> <option value="3weeks">3주일</option> <option value="1month">1개월</option> <option value="3months">3개월</option> <option value="6months">6개월</option> <option value="1year">1년</option> <option value="2years">2년</option> <option value="3years">3년</option> <option value="4years">4년</option> <option value="5years">5년</option> <option value="6years">6년</option> <option value="7years">7년</option> <option value="8years">8년</option> <option value="9years">9년</option> <option value="10years">10년</option> </select> </div> <div class="form-group second-row"> <label for="uploadDateRange">업로드 연도</label> <div class="date-range-container"> <div class="date-input-group"> <input type="date" id="startDate" name="startDate" placeholder="시작일" /> </div> <div class="date-input-group"> <input type="date" id="endDate" name="endDate" placeholder="종료일" /> </div> </div> </div> </div> <!-- 동영상 길이 선택 (별도 섹션으로 분리하여 넓은 공간 확보) --> <div class="video-length-section"> <div class="section-header"> <label class="section-label">동영상 길이</label> <div class="select-controls"> <div class="select-all-container"> <input type="checkbox" id="selectAllVideoLength"> <label for="selectAllVideoLength">모두 선택</label> </div> <div class="select-group-container"> <input type="checkbox" id="selectFirst2VideoLength" checked> <label for="selectFirst2VideoLength">맨 앞 두 개만</label> </div> <div class="select-group-container"> <input type="checkbox" id="selectNext3VideoLength"> <label for="selectNext3VideoLength">그 뒤 세 개만</label> </div> <div class="select-group-container"> <input type="checkbox" id="selectTop5VideoLength"> <label for="selectTop5VideoLength">위 5개 선택</label> </div> <div class="select-group-container"> <input type="checkbox" id="selectBottom5VideoLength"> <label for="selectBottom5VideoLength">밑 5개 선택</label> </div> </div> </div> <div class="video-length-grid"> <div class="checkbox-item"> <input type="checkbox" id="shortForm1" name="videoLength" value="short1" checked> <label for="shortForm1">Short Form1<br><span class="duration-desc">(1분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="shortForm2" name="videoLength" value="short2" checked> <label for="shortForm2">Short Form2<br><span class="duration-desc">(1분 이상 2분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="midForm1" name="videoLength" value="mid1"> <label for="midForm1">Mid Form1<br><span class="duration-desc">(2분 이상 10분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="midForm2" name="videoLength" value="mid2"> <label for="midForm2">Mid Form2<br><span class="duration-desc">(10분 이상 20분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm1" name="videoLength" value="long1"> <label for="longForm1">Long Form1<br><span class="duration-desc">(20분 이상 30분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm2" name="videoLength" value="long2"> <label for="longForm2">Long Form2<br><span class="duration-desc">(30분 이상 40분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm3" name="videoLength" value="long3"> <label for="longForm3">Long Form3<br><span class="duration-desc">(40분 이상 50분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm4" name="videoLength" value="long4"> <label for="longForm4">Long Form4<br><span class="duration-desc">(50분 이상 60분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm5" name="videoLength" value="long5"> <label for="longForm5">Long Form5<br><span class="duration-desc">(60분 이상 90분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm6" name="videoLength" value="long6"> <label for="longForm6">Long Form6<br><span class="duration-desc">(90분 이상)</span></label> </div> </div> </div> <button type="submit" class="search-btn"> 🔍 검색하기 </button> </form> <div id="loadingIndicator" class="loading" style="display: none;"> <div class="spinner"></div> <p>검색 중입니다... 잠시만 기다려주세요.</p> </div> <div id="errorMessage" class="error-message" style="display: none;"></div> <div id="resultsContainer" class="results-container" style="display: none;"> <!-- 결과내 재검색 필터 --> <div id="resultsFilterContainer" class="results-filter-container" style="display: none;"> <div class="filter-header"> <h3>🔍 결과내 재검색 - 업로드 시간대 필터링</h3> <button id="toggleResultsFilter" class="toggle-filter-btn">필터 접기/펼치기</button> </div> <div id="resultsFilterContent" class="filter-content"> <div class="filter-stats"> <p id="filterStats">시간대별 동영상 분포를 분석 중...</p> </div> <div class="timezone-filter-grid"> <div class="filter-group"> <h4>📊 골든타임 (20-23시)</h4> <label> <input type="checkbox" id="filterPrimeTime" checked> <span id="primeTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌅 아침시간 (06-09시)</h4> <label> <input type="checkbox" id="filterMorningCommute" checked> <span id="morningCommuteCount">0개</span> </label> </div> <div class="filter-group"> <h4>🍱 점심시간 (12-14시)</h4> <label> <input type="checkbox" id="filterLunchTime" checked> <span id="lunchTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌆 퇴근시간 (18-20시)</h4> <label> <input type="checkbox" id="filterEveningCommute" checked> <span id="eveningCommuteCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌙 심야시간 (23-02시)</h4> <label> <input type="checkbox" id="filterLateNight" checked> <span id="lateNightCount">0개</span> </label> </div> <div class="filter-group"> <h4>💼 업무시간 (09-18시)</h4> <label> <input type="checkbox" id="filterWorkTime" checked> <span id="workTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🎉 주말</h4> <label> <input type="checkbox" id="filterWeekend" checked> <span id="weekendCount">0개</span> </label> </div> <div class="filter-group"> <h4>📅 평일</h4> <label> <input type="checkbox" id="filterWeekday" checked> <span id="weekdayCount">0개</span> </label> </div> <div class="filter-group"> <h4>☀️ 오전시간 (09-12시)</h4> <label> <input type="checkbox" id="filterMorningTime" checked> <span id="morningTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌇 오후시간 (14-18시)</h4> <label> <input type="checkbox" id="filterAfternoonTime" checked> <span id="afternoonTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌃 저녁시간 (20-23시)</h4> <label> <input type="checkbox" id="filterEveningTime" checked> <span id="eveningTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌌 새벽시간 (02-06시)</h4> <label> <input type="checkbox" id="filterEarlyMorningTime" checked> <span id="earlyMorningTimeCount">0개</span> </label> </div> </div> <div class="filter-actions"> <button id="applyTimezoneFilter" class="apply-filter-btn">필터 적용</button> <button id="resetTimezoneFilter" class="reset-filter-btn">모두 해제</button> <button id="selectBestTimes" class="best-times-btn">떡상 시간대만 선택</button> </div> </div> </div> <div class="results-header"> <div class="results-info"> <div class="datetime-display"> <div class="analog-clock" id="analogClock"> <div class="clock-numbers"> <div class="clock-number n12">12</div> <div class="clock-number n3">3</div> <div class="clock-number n6">6</div> <div class="clock-number n9">9</div> </div> <div class="clock-hand hour-hand" id="hourHand"></div> <div class="clock-hand minute-hand" id="minuteHand"></div> <div class="clock-hand second-hand" id="secondHand"></div> <div class="clock-center"></div> </div> </div> <div class="search-results-info"> <span id="resultsCount" class="results-count-number">0</span><span id="totalResultsInfo" style="display: none;">/<span id="totalCount" class="results-count-number">0</span></span> 개의 결과가 검색되었습니다. <span id="searchKeywordInfo" style="display: none;">&nbsp;&nbsp; <span id="searchKeyword" class="results-count-number"></span></span> </div> </div> <div class="results-controls"> <div class="pagination-controls"> <label>(구독자수: 만 단위) &nbsp;&nbsp; </label> <select id="itemsPerPage"> <option value="10">10개</option> <option value="20">20개</option> <option value="30" selected>30개</option> <option value="40">40개</option> <option value="50">50개</option> <option value="100">100개</option> <option value="150">150개</option> <option value="200">200개</option> </select> </div> </div> <div class="excel-download-container"> <button id="downloadExcelBtn" class="excel-download-btn" style="display: none;" title="클릭하면 저장 위치를 선택할 수 있습니다 (Chrome/Edge 86+ 지원)"> <span id="excelBtnPrefix"></span><span id="excelBtnIcon">📊</span><span id="excelBtnSuffix"></span> </button> </div> </div> <div class="table-container"> <table class="results-table"> <thead> <tr> <th data-sort="thumbnail_url">👍</th> <th class="sortable multi-sort"> <span data-sort="youtube_channel_name" class="sort-icon">✨</span> <span data-sort="channel_created_date" class="sort-icon">📅</span> </th> <th data-sort="title" class="sortable">📽️</th> <th class="sortable multi-sort"> <span data-sort="primary_category" class="sort-icon">🌈</span> <span data-sort="channel_playback_rpm" class="sort-icon">💰</span> </th> <th data-sort="country" class="sortable">🏳️‍🌈</th> <th data-sort="status_date" class="sortable" id="uploadDateHeader">rpm-estimate/th> <th data-sort="korea_time" class="sortable" id="koreaTimeHeader">🏠</th> <th data-sort="likes" class="sortable">💛</th> <th data-sort="daily_view_count" class="sortable">👓</th> <th data-sort="subscriber_count" class="sortable">👪</th> <th data-sort="estimated_rpm" class="sortable">💰</th> <th data-sort="vod_url">▶️</th> <th data-sort="duration" class="sortable">⏰</th> <th>👍</th> </tr> </thead> <tbody id="resultsTableBody"> </tbody> </table> </div> <div class="pagination" id="pagination"> </div> </div> </div> <script> let searchResults = []; let currentPage = 1; let itemsPerPage = 30; let sortColumn = 'daily_view_count'; let sortDirection = 'desc'; // 검색 폼 제출 이벤트 document.getElementById('searchForm').addEventListener('submit', async (e) => { e.preventDefault(); await performSearch(); }); // 검색 범위 이벤트들은 initializeApp에서 등록됨 // 검색 범위 디스플레이 업데이트 함수 function updateSearchScopeDisplay() { const searchScopeCheckboxes = document.querySelectorAll('input[name="searchScope"]:checked'); const display = document.getElementById('searchScopeDisplay'); if (searchScopeCheckboxes.length === 0) { display.textContent = '검색 범위를 선택해주세요'; } else if (searchScopeCheckboxes.length === document.querySelectorAll('input[name="searchScope"]').length) { display.textContent = '모든 범위 선택됨'; } else { const selectedNames = Array.from(searchScopeCheckboxes).map(cb => { const label = cb.parentElement.querySelector('label'); return label.textContent; }); display.textContent = selectedNames.join(', ') + ' 선택됨'; } } // 페이지 로드 시 초기 상태 설정 updateSearchScopeDisplay(); // 모든 검색 범위 체크박스 상태 업데이트 function updateSelectAllSearchScope() { const searchScopeCheckboxes = document.querySelectorAll('input[name="searchScope"]'); const checkedSearchScope = document.querySelectorAll('input[name="searchScope"]:checked'); const selectAllCheckbox = document.getElementById('selectAllSearchScope'); if (checkedSearchScope.length === 0) { selectAllCheckbox.checked = false; selectAllCheckbox.indeterminate = false; } else if (checkedSearchScope.length === searchScopeCheckboxes.length) { selectAllCheckbox.checked = true; selectAllCheckbox.indeterminate = false; } else { selectAllCheckbox.checked = false; selectAllCheckbox.indeterminate = true; } } // 카테고리 드롭다운 기능은 DOMContentLoaded 이벤트에서 설정됨 // 문서 클릭 시 드롭다운 닫기 document.addEventListener('click', (e) => { // 검색 범위 드롭다운 처리 const searchScopeDisplay = document.getElementById('searchScopeDisplay'); const searchScopeDropdown = document.getElementById('searchScopeDropdown'); if (searchScopeDisplay && searchScopeDropdown) { const searchScopeSelector = searchScopeDisplay.closest('.category-selector'); if (searchScopeSelector && !searchScopeSelector.contains(e.target)) { searchScopeDropdown.classList.remove('show'); } } // 카테고리 드롭다운 처리 const categoryDisplay = document.getElementById('categoryDisplay'); const categoryDropdown = document.getElementById('categoryDropdown'); if (categoryDisplay && categoryDropdown) { const categorySelector = categoryDisplay.closest('.category-selector'); if (categorySelector && !categorySelector.contains(e.target)) { categoryDropdown.classList.remove('show'); } } // 국가 드롭다운 처리 (새로 추가) const countryDisplay = document.getElementById('countryDisplay'); const countryDropdown = document.getElementById('countryDropdown'); if (countryDisplay && countryDropdown) { const countrySelector = countryDisplay.closest('.category-selector'); if (countrySelector && !countrySelector.contains(e.target)) { countryDropdown.classList.remove('show'); } } }); // 카테고리 이벤트들은 initializeApp에서 등록됨 // 카테고리 디스플레이 업데이트 함수 function updateCategoryDisplay() { const categoryCheckboxes = document.querySelectorAll('input[name="categories"]:checked'); const display = document.getElementById('categoryDisplay'); if (categoryCheckboxes.length === 0) { display.textContent = '카테고리를 선택해주세요'; } else if (categoryCheckboxes.length === document.querySelectorAll('input[name="categories"]').length) { display.textContent = '모든 카테고리 선택됨'; } else if (categoryCheckboxes.length <= 3) { const selectedNames = Array.from(categoryCheckboxes).map(cb => { const label = cb.parentElement.querySelector('label'); return label.textContent; }); display.textContent = selectedNames.join(', '); } else { display.textContent = `${categoryCheckboxes.length}개 카테고리 선택됨`; } } // 모든 카테고리 체크박스 상태 업데이트 function updateSelectAllCategories() { const categoryCheckboxes = document.querySelectorAll('input[name="categories"]'); const checkedCategories = document.querySelectorAll('input[name="categories"]:checked'); const selectAllCheckbox = document.getElementById('selectAllCategories'); if (checkedCategories.length === 0) { selectAllCheckbox.checked = false; selectAllCheckbox.indeterminate = false; } else if (checkedCategories.length === categoryCheckboxes.length) { selectAllCheckbox.checked = true; selectAllCheckbox.indeterminate = false; } else { selectAllCheckbox.checked = false; selectAllCheckbox.indeterminate = true; } } // 썸네일 다운로드 함수 (파일명 안전화 처리)``

JavaScript가 시작되는 부분을 찾았습니다! 이제 검색 키워드 표시 기능을 추가하겠습니다. `performSearch` 함수를 찾기 위해 조금 더 읽어보겠습니다.

F

Read text file

요청

``{ `head`: 3000, `path`: `H:\\workspace\\you001_time1\\you_list.html` }``

응답

``<!DOCTYPE html> <html lang="ko"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>YouTube 채널 검색 시스템</title> <style> * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f5f5f5; color: #333; line-height: 1.6; } .container { max-width: 1540px; margin: 0 auto; padding: 20px; } .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; margin-bottom: 30px; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.1); } .header h1 { font-size: 2.5em; margin-bottom: 10px; font-weight: 700; } .header p { font-size: 1.1em; opacity: 0.9; } .search-form { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); margin-bottom: 30px; } .form-grid { display: grid; grid-template-columns: 2fr 2.5fr 1.2fr 1fr 1.8fr; grid-template-rows: auto auto; gap: 20px; margin-bottom: 20px; } /* 두 번째 줄 필드들 위치 지정 */ .form-group.second-row { grid-row: 2; } .form-group.second-row:nth-child(6) { grid-column: 1; } /* 카테고리 */ .form-group.second-row:nth-child(7) { grid-column: 2; } /* 검색 결과 수 */ .form-group.second-row:nth-child(8) { grid-column: 3; } /* 업로드 기간 */ .form-group.second-row:nth-child(9) { grid-column: 4 / 6; } /* 업로드 연도 (2칸 차지) */ .form-group { display: flex; flex-direction: column; } .form-group label { font-weight: 600; margin-bottom: 8px; color: #555; font-size: 0.95em; } .form-group input, .form-group select { padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1em; transition: all 0.3s ease; background: white; height: 48px; box-sizing: border-box; } .form-group input:focus, .form-group select:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); } .date-range-container { display: flex; gap: 15px; flex-wrap: nowrap; } .date-input-group { display: flex; flex-direction: column; flex: 1; min-width: 120px; } .date-input-group input[type="date"] { padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1em; transition: all 0.3s ease; width: 100%; background: white; height: 48px; box-sizing: border-box; } .date-input-group input[type="date"]:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); } .checkbox-group { display: flex; gap: 15px; align-items: center; margin-top: 8px; } .checkbox-item { display: flex; align-items: center; gap: 6px; } .checkbox-item input[type="checkbox"] { width: auto; margin: 0; } /* 카테고리 선택기 스타일 */ .category-selector { position: relative; } .category-display { padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; background: white; cursor: pointer; transition: all 0.3s ease; font-size: 1em; user-select: none; height: 48px; box-sizing: border-box; display: flex; align-items: center; } .category-display:hover { border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); } .category-display:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); } .category-dropdown { position: absolute; top: 100%; left: 0; right: 0; background: white; border: 2px solid #667eea; border-radius: 8px; box-shadow: 0 8px 32px rgba(0,0,0,0.15); z-index: 1000; display: none; max-height: 250px; overflow-y: auto; padding: 0; } .category-dropdown.show { display: block; } .category-header { padding: 0; background: #f8f9fa; border-bottom: 1px solid #e9ecef; display: flex; align-items: center; gap: 8px; font-weight: 600; min-height: 0; } .category-header input[type="checkbox"] { transform: scale(1.1); } .category-header label { cursor: pointer; user-select: none; margin: 0; } .category-options { max-height: 250px; overflow-y: auto; padding: 0; } .category-item { padding: 0px 10px !important; display: flex; align-items: center; gap: 8px; transition: background-color 0.2s ease; border-bottom: 1px solid #f8f9fa; line-height: 1.0 !important; min-height: 20px !important; } .category-item:hover { background: #e3f2fd; } .category-item:last-child { border-bottom: none; } .category-item input[type="checkbox"] { transform: scale(1.05); margin: 0; } .category-item label { cursor: pointer; user-select: none; margin: 0; font-size: 0.95em; } .category-item input[type="checkbox"]:checked + label { color: #667eea; font-weight: 500; } /* 동영상 길이 섹션 스타일 */ .video-length-section { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 25px; } .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; } .section-label { font-weight: 600; font-size: 1.1em; color: #333; margin: 0; } .select-controls { display: flex; gap: 20px; align-items: center; flex-wrap: wrap; } .select-all-container, .select-group-container { display: flex; align-items: center; gap: 8px; font-size: 0.9em; color: #555; } .select-all-container input[type="checkbox"], .select-group-container input[type="checkbox"] { transform: scale(1.1); cursor: pointer; } .select-all-container label, .select-group-container label { cursor: pointer; font-weight: 500; user-select: none; } .select-group-container { font-size: 0.85em; color: #666; } .video-length-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; align-items: start; } .video-length-grid .checkbox-item { display: flex; align-items: flex-start; gap: 10px; padding: 15px; border: 2px solid #e1e5e9; border-radius: 12px; transition: all 0.3s ease; background: #f8f9fa; } .video-length-grid .checkbox-item:hover { border-color: #667eea; background: #f0f2ff; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15); } .video-length-grid .checkbox-item input[type="checkbox"]:checked + label { color: #667eea; font-weight: 600; } .video-length-grid .checkbox-item input[type="checkbox"] { margin-top: 4px; transform: scale(1.2); } .video-length-grid .checkbox-item label { font-weight: 500; font-size: 1em; line-height: 1.4; cursor: pointer; } .duration-desc { font-size: 0.85em; color: #666; font-weight: 400; } .search-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 40px; border-radius: 50px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: block; margin: 20px auto 0; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); } .search-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); } .search-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; } .loading { text-align: center; padding: 40px; font-size: 1.2em; color: #666; } .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #667eea; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 20px auto; } @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } .results-container { background: white; border-radius: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); overflow: hidden; } .results-header { background: #f8f9fa; padding: 20px; border-bottom: 1px solid #e9ecef; display: grid; grid-template-columns: 1fr auto auto; align-items: center; gap: 20px; } .results-info { display: flex; align-items: center; gap: 30px; } .datetime-display { position: relative; width: 76px; height: 76px; flex-shrink: 0; } .analog-clock { width: 76px; height: 76px; border: 3px solid #8B4513; border-radius: 50%; background: white; position: relative; box-shadow: 0 2px 8px rgba(0,0,0,0.15); } .clock-center { position: absolute; top: 50%; left: 50%; width: 4px; height: 4px; background: #333; border-radius: 50%; transform: translate(-50%, -50%); z-index: 4; } .clock-numbers { position: absolute; top: 0; left: 0; width: 100%; height: 100%; font-size: 10px; font-weight: bold; color: #333; } .clock-number { position: absolute; width: 16px; height: 16px; text-align: center; line-height: 16px; } .clock-number.n12 { top: 2px; left: 50%; transform: translateX(-50%); } .clock-number.n3 { top: 50%; right: 2px; transform: translateY(-50%); } .clock-number.n6 { bottom: 2px; left: 50%; transform: translateX(-50%); } .clock-number.n9 { top: 50%; left: 2px; transform: translateY(-50%); } .clock-hand { position: absolute; background: #333; transform-origin: bottom center; border-radius: 2px; } .hour-hand { width: 3px; height: 22px; top: 16px; left: 50%; margin-left: -1.5px; z-index: 3; } .minute-hand { width: 2px; height: 30px; top: 8px; left: 50%; margin-left: -1px; z-index: 2; } .second-hand { width: 1px; height: 32px; top: 6px; left: 50%; margin-left: -0.5px; background: #ff0000; z-index: 1; } .search-results-info { font-weight: 600; color: #495057; } .results-count-number { color: red; font-size: 1.6em; font-weight: bold; margin-right: 4px; } .results-controls { display: flex; align-items: center; gap: 20px; flex-wrap: wrap; width: 280px; flex-shrink: 0; } .excel-download-container { display: flex; justify-content: flex-end; align-items: center; width: 80px; flex-shrink: 0; } .pagination-controls { display: flex; align-items: center; gap: 15px; } .pagination-controls select { padding: 8px 12px; border: 1px solid #ced4da; border-radius: 6px; background: white; } .excel-download-btn { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 0.9em; width: 60px; min-width: 60px; max-width: 60px; text-align: center; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3); display: flex; align-items: center; justify-content: center; gap: 0px; } .excel-download-btn:hover { background: linear-gradient(135deg, #218838 0%, #1ea085 100%); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4); } .excel-download-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; } .table-container { overflow-x: auto; } .results-table { width: 100%; border-collapse: collapse; background: white; table-layout: fixed; /* 컬럼 width 고정 */ } /* 각 컬럼의 고정 width 설정 (14개 컬럼) */ .results-table th:nth-child(1), .results-table td:nth-child(1) { width: 85px; /* 썸네일 */ } .results-table th:nth-child(2), .results-table td:nth-child(2) { width: 160px; /* 채널명 */ } .results-table th:nth-child(3), .results-table td:nth-child(3) { width: 345px; /* 영상제목 (가장 넓게) */ } .results-table th:nth-child(4), .results-table td:nth-child(4) { width: 110px; /* 카테고리 */ } .results-table th:nth-child(5), .results-table td:nth-child(5) { width: 85px; /* 국가 */ } .results-table th:nth-child(6), .results-table td:nth-child(6) { width: 100px; /* 업로드일 */ } .results-table th:nth-child(7), .results-table td:nth-child(7) { width: 120px; /* 한국시간 */ } .results-table th:nth-child(8), .results-table td:nth-child(8) { width: 80px; /* 좋아요 */ } .results-table th:nth-child(9), .results-table td:nth-child(9) { width: 90px; /* 조회수 */ } .results-table th:nth-child(10), .results-table td:nth-child(10) { width: 85px; /* 구독자 */ } .results-table th:nth-child(11), .results-table td:nth-child(11) { width: 85px; /* RPM */ } .results-table th:nth-child(12), .results-table td:nth-child(12) { width: 50px; /* 동영상 링크 */ } .results-table th:nth-child(13), .results-table td:nth-child(13) { width: 85px; /* 재생시간 */ } .results-table th:nth-child(14), .results-table td:nth-child(14) { width: 60px; /* 썸네일 다운로드 */ } .results-table th { background: #667eea; color: white; padding: 15px 12px; text-align: center; font-weight: 600; cursor: pointer; user-select: none; transition: background-color 0.6s ease; position: relative; font-size: 1.4em; } .results-table th:hover { background: #7b8af0; } .results-table th.sortable::after { content: " ↕"; font-size: 0.8em; opacity: 0.6; } /* RPM 컬럼 화살표 강제 표시 - 개선된 버전 */ .results-table th[data-sort="estimated_rpm"]::after { content: " ↕" !important; font-size: 0.8em !important; opacity: 0.6 !important; display: inline !important; visibility: visible !important; } .results-table th[data-sort="estimated_rpm"].sort-asc::after { content: " ↑" !important; opacity: 1 !important; } .results-table th[data-sort="estimated_rpm"].sort-desc::after { content: " ↓" !important; opacity: 1 !important; } .sort-icon { cursor: pointer; margin: 0 2px; transition: transform 0.2s ease; position: relative; } .sort-icon::after { content: "↕"; font-size: 0.8em; opacity: 0.6; margin-left: 1px; } .sort-icon:hover { transform: scale(1.2); } /* 채널명 컬럼은 개별 이모지에만 화살표 표시 */ .sortable.multi-sort::after { display: none; } .results-table th.sort-asc::after { content: " ↑"; opacity: 1; } .results-table th.sort-desc::after { content: " ↓"; opacity: 1; } .results-table td { padding: 12px; border-bottom: 1px solid #e9ecef; vertical-align: middle; } .results-table tr:nth-child(even) { background-color: #f8f9fa; } .results-table tr:hover { background-color: #e3f2fd; } .thumbnail { width: 80px; height: 60px; object-fit: cover; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); } .video-title { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; line-clamp: 2; /* 표준 CSS 추가 */ overflow: hidden; text-overflow: ellipsis; line-height: 1.4em; max-height: 2.8em; /* line-height × 2 */ word-break: break-word; hyphens: auto; } .channel-name { font-weight: 600; color: #495057; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; width: 100%; transition: color 0.2s ease, font-weight 0.2s ease; } /* 브랜드 채널 스타일 */ .channel-name.brand-channel { color: #A0522D !important; /* 조금 옅은 brown 색상 */ } .channel-link { color: #667eea; text-decoration: none; display: block; width: 100%; } .channel-link:hover { text-decoration: none; } .channel-link:hover .channel-name { color: #ff1493; font-weight: bold; text-decoration: none; transition: color 0.2s ease, font-weight 0.2s ease; } .channel-link:active .channel-name { color: #ff1493; font-weight: bold; } /* 채널 개설일 표시 스타일 (새 기능) */ .channel-created-date { color: #0066ff !important; font-weight: bold !important; font-size: 0.85em; margin-top: 2px; display: block; text-decoration: none; } .channel-link:hover .channel-created-date { color: #0066ff !important; text-decoration: none; } .channel-link:active .channel-created-date { color: #0066ff !important; text-decoration: none; } .view-count { font-weight: 600; color: #28a745; text-align: right; display: block; } .subscriber-count { font-weight: 600; color: #dc3545; text-align: center; display: block; } .duration-time { font-family: 'Courier New', monospace; font-weight: 600; color: #6c757d; background: #f8f9fa; padding: 2px 4px; border-radius: 3px; font-size: 11px; } /* 재생시간 백분율 스타일 */ .duration-percentage { color: blue; font-weight: bold; font-size: 11px; text-align: center; display: block; margin-top: 2px; } .like-count { font-weight: bold; text-align: center; display: block; font-size: 11px; } /* 실제 좋아요 개수 (빨간색) */ .like-count-actual { color: #e91e63; } /* 추정 좋아요 개수 (파란색) */ .like-count-estimated { color: #2196f3; } /* RPM 컬럼 스타일 */ .rpm-estimate { font-weight: bold; text-align: center; display: block; font-size: 11px; color: brown; } /* 카테고리 컬럼 스타일 */ .category-name { font-weight: bold; text-align: center; margin-bottom: 4px; } .channel-rpm-info { text-align: center; } .channel-rpm-info .rpm-estimate { font-size: 13px; color: brown; } /* 국가 컬럼 스타일 */ .country-name { font-weight: bold; text-align: center; margin-bottom: 4px; } .country-rpm-info { text-align: center; } .country-rpm-info .rpm-estimate { font-size: 13px; color: brown; } /* 조회수 컬럼 스타일 */ .view-count { text-align: center; margin-bottom: 4px; } .valid-view-count { text-align: center; } .valid-view-value { color: red; font-weight: bold; } /* 좋아요 컬럼 스타일 */ .like-count-container { text-align: center; } .like-count-bold { font-weight: bold; margin-bottom: 4px; } .like-percentage { text-align: center; } .percentage-value { color: blue; font-weight: bold; } /* 좋아요 백분율 스타일 */ .like-percentage-display { color: blue; font-weight: bold; font-size: 11px; text-align: center; display: block; margin-top: 2px; } /* RPM 컬럼 스타일 */ .rpm-container { text-align: center; } .rpm-estimate { font-weight: bold; text-align: center; display: block; font-size: 11px; color: brown; margin-bottom: 4px; } .rpm-total { text-align: center; } .rpm-total-value { color: red; font-weight: bold; font-size: 11px; } .video-link { color: #667eea; text-decoration: none; font-weight: 500; display: block; text-align: center; } .video-link:hover { text-decoration: none; } .download-btn { background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85em; transition: background-color 0.3s ease; } .download-btn:hover { background: #218838; } .pagination { display: flex; justify-content: center; align-items: center; padding: 20px; gap: 10px; } .pagination button { padding: 8px 16px; border: 1px solid #ced4da; background: white; cursor: pointer; border-radius: 4px; transition: all 0.3s ease; } .pagination button:hover:not(:disabled) { background: #667eea; color: white; border-color: #667eea; } .pagination button:disabled { opacity: 0.5; cursor: not-allowed; } .pagination button.active { background: #667eea; color: white; border-color: #667eea; } .page-info { margin: 0 15px; font-weight: 500; } .error-message { background: #f8d7da; color: #721c24; padding: 15px; border-radius: 8px; margin: 20px 0; border: 1px solid #f5c6cb; } .no-results { text-align: center; padding: 60px 20px; color: #6c757d; } .no-results h3 { margin-bottom: 10px; color: #495057; } /* 업로드 날짜 컬럼 두 줄 표시 */ .upload-date { display: flex; flex-direction: column; align-items: center; line-height: 1.2; } .upload-date .year { font-weight: 600; font-size: 0.9em; color: #333; } .upload-date .month-day { font-weight: 600; font-size: 0.9em; color: #333; margin-top: 2px; } @media (max-width: 1024px) { .form-grid { grid-template-columns: 1fr 1fr 1fr; grid-template-rows: auto auto auto; gap: 15px; } .form-group.second-row:nth-child(6) { grid-column: 1; grid-row: 2; } .form-group.second-row:nth-child(7) { grid-column: 2; grid-row: 2; } .form-group.second-row:nth-child(8) { grid-column: 3; grid-row: 2; } .form-group.second-row:nth-child(9) { grid-column: 1 / 4; grid-row: 3; } } @media (max-width: 768px) { .container { padding: 10px; } .header h1 { font-size: 2em; } .form-grid { grid-template-columns: 1fr; grid-template-rows: repeat(9, auto); } .form-group.second-row { grid-column: 1; grid-row: auto; } .results-header { flex-direction: column; align-items: stretch; } .results-controls { flex-direction: column; gap: 15px; } .pagination-controls { justify-content: center; } .excel-download-btn { align-self: center; width: fit-content; } .results-table { font-size: 0.9em; } .thumbnail { width: 60px; height: 45px; } .video-length-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; } .video-length-grid .checkbox-item { padding: 12px; } /* 모바일에서 컬럼 width 재조정 (13개 컬럼) */ .results-table th:nth-child(1), .results-table td:nth-child(1) { width: 70px; /* 썸네일 */ } .results-table th:nth-child(2), .results-table td:nth-child(2) { width: 120px; /* 채널명 */ } .results-table th:nth-child(3), .results-table td:nth-child(3) { width: 200px; /* 영상제목 */ } .results-table th:nth-child(4), .results-table td:nth-child(4) { width: 100px; /* 카테고리 */ } .results-table th:nth-child(5), .results-table td:nth-child(5) { width: 80px; /* 업로드일 */ } .results-table th:nth-child(6), .results-table td:nth-child(6) { width: 50px; /* 좋아요 */ } .results-table th:nth-child(7), .results-table td:nth-child(7) { width: 90px; /* 조회수 */ } .results-table th:nth-child(8), .results-table td:nth-child(8) { width: 70px; /* 구독자 */ } .results-table th:nth-child(9), .results-table td:nth-child(9) { width: 50px; /* 링크 */ } .results-table th:nth-child(10), .results-table td:nth-child(10) { width: 70px; /* 재생시간 */ } .results-table th:nth-child(11), .results-table td:nth-child(11) { width: 50px; /* 썸네일 다운로드 */ } } /* 듀얼 타임존 컬럼 스타일 */ .upload-date.home-icon { display: flex; justify-content: center; align-items: center; font-size: 1.2em; } .upload-date.home-icon span { cursor: help; } /* 상세 시간 표시 스타일 */ .upload-date.detailed-time { text-align: left; line-height: 1.2; } .upload-date.detailed-time .date-part { font-size: 0.9em; font-weight: bold; color: #333; } .upload-date.detailed-time .time-part { font-size: 0.8em; /* color: #666; */ /* 기존 색상 주석 처리 - 자식 요소가 색상 제어 */ font-weight: normal; margin-top: 2px; position: relative; } .upload-date.detailed-time .time-part .weekday { color: black; font-weight: bold; } .upload-date.detailed-time .time-part .time-only { color: red; font-weight: bold; } .upload-date.detailed-time .time-part .timezone { color: black; font-weight: bold; } /* 개선된 시간 표시 스타일 - 우선순위 강화 */ .upload-date.detailed-time .time-part .time-display { display: inline !important; } .upload-date.detailed-time .time-part .time-display .weekday-bold { color: blue !important; font-weight: bold !important; } .upload-date.detailed-time .time-part .time-display .time-red-bold { color: red !important; font-weight: bold !important; } .upload-date.detailed-time .time-part .time-display .timezone-bold { color: blue !important; font-weight: bold !important; } /* 상위 요소에서 색상 상속 방지 */ .results-table td .upload-date.detailed-time .time-part { color: inherit !important; /* 기본 색상 상속 방지 */ } .results-table td .upload-date.detailed-time .time-part * { color: inherit !important; /* 모든 자식 요소에 적용 */ } /* 시간 표시 전용 스타일 - 최고 우선순위 */ .results-table .time-display .weekday-bold, td .time-display .weekday-bold { color: blue !important; font-weight: bold !important; } .results-table .time-display .time-red-bold, td .time-display .time-red-bold { color: red !important; font-weight: bold !important; } .results-table .time-display .timezone-bold, td .time-display .timezone-bold { color: blue !important; font-weight: bold !important; } /* 한국시간 컬럼 헤더는 기본 테이블 헤더 스타일 사용 */ /* 고정 컬럼 크기 스타일 */ .results-table { table-layout: fixed; width: 100%; } .results-table th, .results-table td { height: 60px; vertical-align: middle; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding: 8px; } /* 각 컬럼별 고정 너비 */ .results-table th:nth-child(1), /* 썸네일 */ .results-table td:nth-child(1) { width: 80px; } .results-table th:nth-child(2), /* 채널명 */ .results-table td:nth-child(2) { width: 150px; } .results-table th:nth-child(3), /* 영상제목 */ .results-table td:nth-child(3) { width: 250px; white-space: normal; line-height: 1.3; } .results-table th:nth-child(4), /* 카테고리 */ .results-table td:nth-child(4) { width: 120px; } .results-table th:nth-child(5), /* 국가 */ .results-table td:nth-child(5) { width: 80px; } .results-table th:nth-child(6), /* 업로드일 */ .results-table td:nth-child(6) { width: 90px; } .results-table th:nth-child(7), /* 한국시간 */ .results-table td:nth-child(7) { width: 120px; } .results-table th:nth-child(8), /* 좋아요 */ .results-table td:nth-child(8) { width: 60px; } .results-table th:nth-child(9), /* 조회수 */ .results-table td:nth-child(9) { width: 90px; } .results-table th:nth-child(10), /* 구독자 */ .results-table td:nth-child(10) { width: 80px; } .results-table th:nth-child(11), /* RPM */ .results-table td:nth-child(11) { width: 85px; } .results-table th:nth-child(12), /* 재생시간 */ .results-table td:nth-child(12) { width: 70px; } .results-table th:nth-child(13), /* 다운로드 */ .results-table td:nth-child(13) { width: 60px; } /* 국가 컬럼 스타일 */ .country-name { font-size: 0.9em; font-weight: 500; color: #444; text-align: center; display: block; } /* 결과내 재검색 필터 스타일 */ .results-filter-container { background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border: 2px solid #dee2e6; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); } .filter-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px 10px 0 0; } .filter-header h3 { margin: 0; font-size: 1.1em; font-weight: 600; } .toggle-filter-btn { background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85em; transition: all 0.3s ease; } .toggle-filter-btn:hover { background: rgba(255,255,255,0.3); } .filter-content { padding: 20px; } .filter-stats { background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #667eea; } .filter-stats p { margin: 0; color: #495057; font-weight: 500; } .timezone-filter-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; } .filter-group { background: white; padding: 15px; border-radius: 8px; border: 1px solid #e9ecef; transition: all 0.3s ease; } .filter-group:hover { border-color: #667eea; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1); } .filter-group h4 { margin: 0 0 10px 0; font-size: 0.9em; color: #495057; font-weight: 600; } .filter-group label { display: flex; align-items: center; cursor: pointer; font-weight: 500; color: #6c757d; } .filter-group input[type="checkbox"] { margin-right: 8px; transform: scale(1.1); } .filter-group span { font-size: 0.85em; color: #667eea; font-weight: 600; } .filter-actions { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; } .apply-filter-btn { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; } .apply-filter-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3); } .reset-filter-btn { background: linear-gradient(135deg, #6c757d 0%, #495057 100%); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; } .reset-filter-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3); } .best-times-btn { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; } .best-times-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3); } #filteredResultsInfo { color: #667eea; font-weight: 600; margin-left: 10px; } .filter-content.collapsed { display: none; } @media (max-width: 768px) { .timezone-filter-grid { grid-template-columns: 1fr; } .filter-actions { flex-direction: column; align-items: stretch; } .filter-header { flex-direction: column; gap: 10px; text-align: center; } } </style> </head> <body> <div class="container"> <div class="header"> <h1>🎥 YouTube Search</h1> <p>전세계 유튜브 채널에서 원하는 동영상을 찾아봅니다</p> </div> <form class="search-form" id="searchForm"> <div class="form-grid"> <div class="form-group"> <label for="country">국가 선택 (50개국 글로벌 커버리지)</label> <div class="category-selector"> <div class="category-display" id="countryDisplay" tabindex="0">대한민국 선택됨</div> <div class="category-dropdown" id="countryDropdown"> <div class="category-header"> </div> <div class="category-options"> <!-- 전세계 옵션 추가 --> <div class="category-item"> <input type="radio" id="country_WORLD" name="country" value="worldwide"> <label for="country_WORLD">🌍 전세계</label> </div> <!-- 1. 모든 국가 (최상단) <div class="category-item"> <input type="radio" id="country_WORLD" name="country" value="worldwide"> <label for="country_WORLD">🌍 모든 국가</label> </div> --> <!-- 2. 대한민국 (두 번째) --> <div class="category-item"> <input type="radio" id="country_KR" name="country" value="korea" checked> <label for="country_KR">🇰🇷 대한민국</label> </div> <!-- 3. RPM 순위 1위: 호주 --> <div class="category-item"> <input type="radio" id="country_AU" name="country" value="australia"> <label for="country_AU">🇦🇺 호주</label> </div> <!-- 4. RPM 순위 2위: 미국 --> <div class="category-item"> <input type="radio" id="country_US" name="country" value="usa"> <label for="country_US">🇺🇸 미국</label> </div> <!-- 5. RPM 순위 3위: 캐나다 --> <div class="category-item"> <input type="radio" id="country_CA" name="country" value="canada"> <label for="country_CA">🇨🇦 캐나다</label> </div> <!-- 6. RPM 순위 4위: 뉴질랜드 --> <div class="category-item"> <input type="radio" id="country_NZ" name="country" value="newzealand"> <label for="country_NZ">🇳🇿 뉴질랜드</label> </div> <!-- 7. RPM 순위 5위: 스위스 --> <div class="category-item"> <input type="radio" id="country_CH" name="country" value="switzerland"> <label for="country_CH">🇨🇭 스위스</label> </div> <!-- 8. RPM 순위 6위: 영국 --> <div class="category-item"> <input type="radio" id="country_GB" name="country" value="uk"> <label for="country_GB">🇬🇧 영국</label> </div> <!-- 9. RPM 순위 7위: 노르웨이 --> <div class="category-item"> <input type="radio" id="country_NO" name="country" value="norway"> <label for="country_NO">🇳🇴 노르웨이</label> </div> <!-- 10. RPM 순위 8위: 독일 --> <div class="category-item"> <input type="radio" id="country_DE" name="country" value="germany"> <label for="country_DE">🇩🇪 독일</label> </div> <!-- 11. RPM 순위 9위: 아일랜드 --> <div class="category-item"> <input type="radio" id="country_IE" name="country" value="ireland"> <label for="country_IE">🇮🇪 아일랜드</label> </div> <!-- 12. RPM 순위 10위: 네덜란드 --> <div class="category-item"> <input type="radio" id="country_NL" name="country" value="netherlands"> <label for="country_NL">🇳🇱 네덜란드</label> </div> <!-- 13. RPM 순위 11위: 덴마크 --> <div class="category-item"> <input type="radio" id="country_DK" name="country" value="denmark"> <label for="country_DK">🇩🇰 덴마크</label> </div> <!-- 14. RPM 순위 12위: 홍콩 --> <div class="category-item"> <input type="radio" id="country_HK" name="country" value="hongkong"> <label for="country_HK">🇭🇰 홍콩</label> </div> <!-- 15. RPM 순위 13위: 스웨덴 --> <div class="category-item"> <input type="radio" id="country_SE" name="country" value="sweden"> <label for="country_SE">🇸🇪 스웨덴</label> </div> <!-- 16. RPM 순위 14위: 핀란드 --> <div class="category-item"> <input type="radio" id="country_FI" name="country" value="finland"> <label for="country_FI">🇫🇮 핀란드</label> </div> <!-- 17. RPM 순위 15위: 싱가포르 --> <div class="category-item"> <input type="radio" id="country_SG" name="country" value="singapore"> <label for="country_SG">🇸🇬 싱가포르</label> </div> <!-- 18. RPM 순위 16위: 오스트리아 --> <div class="category-item"> <input type="radio" id="country_AT" name="country" value="austria"> <label for="country_AT">🇦🇹 오스트리아</label> </div> <!-- 19. RPM 순위 17위: 룩셈부르크 --> <div class="category-item"> <input type="radio" id="country_LU" name="country" value="luxembourg"> <label for="country_LU">🇱🇺 룩셈부르크</label> </div> <!-- 20. RPM 순위 18위: 벨기에 --> <div class="category-item"> <input type="radio" id="country_BE" name="country" value="belgium"> <label for="country_BE">🇧🇪 벨기에</label> </div> <!-- 21. RPM 순위 19위: 프랑스 --> <div class="category-item"> <input type="radio" id="country_FR" name="country" value="france"> <label for="country_FR">🇫🇷 프랑스</label> </div> <!-- 22. RPM 순위 20위: 이탈리아 --> <div class="category-item"> <input type="radio" id="country_IT" name="country" value="italy"> <label for="country_IT">🇮🇹 이탈리아</label> </div> <!-- 23. RPM 순위 21위: 스페인 --> <div class="category-item"> <input type="radio" id="country_ES" name="country" value="spain"> <label for="country_ES">🇪🇸 스페인</label> </div> <!-- 24. RPM 순위 22위: 체코 --> <div class="category-item"> <input type="radio" id="country_CZ" name="country" value="czechrepublic"> <label for="country_CZ">🇨🇿 체코</label> </div> <!-- 25. RPM 순위 23위: 이스라엘 --> <div class="category-item"> <input type="radio" id="country_IL" name="country" value="israel"> <label for="country_IL">🇮🇱 이스라엘</label> </div> <!-- 26. RPM 순위 24위: 포르투갈 --> <div class="category-item"> <input type="radio" id="country_PT" name="country" value="portugal"> <label for="country_PT">🇵🇹 포르투갈</label> </div> <!-- 27. RPM 순위 25위: 일본 --> <div class="category-item"> <input type="radio" id="country_JP" name="country" value="japan"> <label for="country_JP">🇯🇵 일본</label> </div> <!-- 28. RPM 순위 26위: 아랍에미리트 --> <div class="category-item"> <input type="radio" id="country_AE" name="country" value="uae"> <label for="country_AE">🇦🇪 아랍에미리트</label> </div> <!-- 29. RPM 순위 27위: 카타르 --> <div class="category-item"> <input type="radio" id="country_QA" name="country" value="qatar"> <label for="country_QA">🇶🇦 카타르</label> </div> <!-- 30. RPM 순위 28위: ��웨이트 --> <div class="category-item"> <input type="radio" id="country_KW" name="country" value="kuwait"> <label for="country_KW">🇰🇼 쿠웨이트</label> </div> <!-- 31. RPM 순위 29위: 사우디아라비아 --> <div class="category-item"> <input type="radio" id="country_SA" name="country" value="saudi"> <label for="country_SA">🇸🇦 사우디아라비아</label> </div> <!-- 32. RPM 순위 30위: 브라질 --> <div class="category-item"> <input type="radio" id="country_BR" name="country" value="brazil"> <label for="country_BR">🇧🇷 브라질</label> </div> <!-- 33. RPM 순위 31위: 폴란드 --> <div class="category-item"> <input type="radio" id="country_PL" name="country" value="poland"> <label for="country_PL">🇵🇱 폴란드</label> </div> <!-- 34. RPM 순위 32위: 남아프리카공화국 --> <div class="category-item"> <input type="radio" id="country_ZA" name="country" value="southafrica"> <label for="country_ZA">🇿🇦 남아프리카공화국</label> </div> <!-- 35. RPM 순위 33위: 터키 --> <div class="category-item"> <input type="radio" id="country_TR" name="country" value="turkey"> <label for="country_TR">🇹🇷 터키</label> </div> <!-- 36. RPM 순위 35위: 헝가리 --> <div class="category-item"> <input type="radio" id="country_HU" name="country" value="hungary"> <label for="country_HU">🇭🇺 헝가리</label> </div> <!-- 37. RPM 순위 36위: 수리남 --> <div class="category-item"> <input type="radio" id="country_SR" name="country" value="suriname"> <label for="country_SR">🇸🇷 수리남</label> </div> <!-- 38. RPM 순위 37위: 멕시코 --> <div class="category-item"> <input type="radio" id="country_MX" name="country" value="mexico"> <label for="country_MX">🇲🇽 멕시코</label> </div> <!-- 39. RPM 순위 38위: 콜롬비아 --> <div class="category-item"> <input type="radio" id="country_CO" name="country" value="colombia"> <label for="country_CO">🇨🇴 콜롬비아</label> </div> <!-- 40. RPM 순위 39위: 아르헨티나 --> <div class="category-item"> <input type="radio" id="country_AR" name="country" value="argentina"> <label for="country_AR">🇦🇷 아르헨티나</label> </div> <!-- 41. RPM 순위 40위: 모잠비크 --> <div class="category-item"> <input type="radio" id="country_MZ" name="country" value="mozambique"> <label for="country_MZ">🇲🇿 모잠비크</label> </div> <!-- 42. RPM 순위 41위: 인도네시아 --> <div class="category-item"> <input type="radio" id="country_ID" name="country" value="indonesia"> <label for="country_ID">🇮🇩 인도네시아</label> </div> <!-- 43. RPM 순위 42위: 베트남 --> <div class="category-item"> <input type="radio" id="country_VN" name="country" value="vietnam"> <label for="country_VN">🇻🇳 베트남</label> </div> <!-- 44. RPM 순위 43위: 인도 --> <div class="category-item"> <input type="radio" id="country_IN" name="country" value="india"> <label for="country_IN">🇮🇳 인도</label> </div> <!-- 45. RPM 순위 44위: 파키스탄 --> <div class="category-item"> <input type="radio" id="country_PK" name="country" value="pakistan"> <label for="country_PK">🇵🇰 파키스탄</label> </div> <!-- 46. RPM 순위 45위: 방글라데시 --> <div class="category-item"> <input type="radio" id="country_BD" name="country" value="bangladesh"> <label for="country_BD">🇧🇩 방글라데시</label> </div> <!-- 47. RPM 순위 46위: 자메이카 --> <div class="category-item"> <input type="radio" id="country_JM" name="country" value="jamaica"> <label for="country_JM">🇯🇲 자메이카</label> </div> <!-- 48. RPM 순위 47위: 리비아 --> <div class="category-item"> <input type="radio" id="country_LY" name="country" value="libya"> <label for="country_LY">🇱🇾 리비아</label> </div> <!-- 49. RPM 순위 48위: 아이슬란드 --> <div class="category-item"> <input type="radio" id="country_IS" name="country" value="iceland"> <label for="country_IS">🇮🇸 아이슬란드</label> </div> <!-- 50. RPM 순위 49위: 스리랑카 --> <div class="category-item"> <input type="radio" id="country_LK" name="country" value="srilanka"> <label for="country_LK">🇱🇰 스리랑카</label> </div> <!-- 51. RPM 순위 50위: 중국 --> <div class="category-item"> <input type="radio" id="country_CN" name="country" value="china"> <label for="country_CN">🇨🇳 중국</label> </div> </div> </div> </div> </div> <div class="form-group"> <label for="keyword">검색 키워드</label> <input type="text" id="keyword" name="keyword" placeholder="키워드 입력 (비워두면 인기 동영상 검색)"> </div> <div class="form-group" style="flex: 0 0 calc(10% - 10px); min-width: 100px;"> <label for="searchScope">검색 범위</label> <div class="category-selector"> <div class="category-display" id="searchScopeDisplay">영상제목 선택됨</div> <div class="category-dropdown" id="searchScopeDropdown"> <div class="category-header"> <input type="checkbox" id="selectAllSearchScope"> <label for="selectAllSearchScope">모든 범위</label> </div> <div class="category-options"> <div class="category-item"> <input type="checkbox" id="searchTitle" name="searchScope" value="title" checked> <label for="searchTitle">영상제목</label> </div> <div class="category-item"> <input type="checkbox" id="searchChannel" name="searchScope" value="channel"> <label for="searchChannel">채널명</label> </div> <div class="category-item"> <input type="checkbox" id="searchTags" name="searchScope" value="tags"> <label for="searchTags">태그</label> </div> </div> </div> </div> </div> <div class="form-group" style="flex: 0 0 calc(10% - 10px); min-width: 120px;"> <label for="minAvgWatchRate">최소평균시청률</label> <input type="number" id="minAvgWatchRate" name="minAvgWatchRate" min="0" max="100" step="0.1" placeholder="±15-25%"> </div> <div class="form-group"> <label for="viewRange">조회수</label> <div class="date-range-container"> <div class="date-input-group"> <input type="number" id="minViews" name="minViews" value="100000" placeholder="최소 조회수" /> </div> <div class="date-input-group"> <input type="number" id="maxViews" name="maxViews" placeholder="최대 조회수" /> </div> </div> </div> <div class="form-group second-row"> <label for="categories">카테고리</label> <div class="category-selector"> <div class="category-display" id="categoryDisplay" tabindex="0">모든 카테고리 선택됨</div> <div class="category-dropdown" id="categoryDropdown"> <div class="category-header"> <input type="checkbox" id="selectAllCategories" checked> <label for="selectAllCategories">모든 카테고리</label> </div> <div class="category-options"> <div class="category-item"> <input type="checkbox" id="cat1" name="categories" value="1" checked> <label for="cat1">Film & Animation</label> </div> <div class="category-item"> <input type="checkbox" id="cat2" name="categories" value="2" checked> <label for="cat2">Autos & Vehicles</label> </div> <div class="category-item"> <input type="checkbox" id="cat10" name="categories" value="10" checked> <label for="cat10">Music</label> </div> <div class="category-item"> <input type="checkbox" id="cat15" name="categories" value="15" checked> <label for="cat15">Pets & Animals</label> </div> <div class="category-item"> <input type="checkbox" id="cat17" name="categories" value="17" checked> <label for="cat17">Sports</label> </div> <div class="category-item"> <input type="checkbox" id="cat19" name="categories" value="19" checked> <label for="cat19">Travel & Events</label> </div> <div class="category-item"> <input type="checkbox" id="cat20" name="categories" value="20" checked> <label for="cat20">Gaming</label> </div> <div class="category-item"> <input type="checkbox" id="cat22" name="categories" value="22" checked> <label for="cat22">People & Blogs</label> </div> <div class="category-item"> <input type="checkbox" id="cat23" name="categories" value="23" checked> <label for="cat23">Comedy</label> </div> <div class="category-item"> <input type="checkbox" id="cat24" name="categories" value="24" checked> <label for="cat24">Entertainment</label> </div> <div class="category-item"> <input type="checkbox" id="cat25" name="categories" value="25" checked> <label for="cat25">News & Politics</label> </div> <div class="category-item"> <input type="checkbox" id="cat26" name="categories" value="26" checked> <label for="cat26">Howto & Style</label> </div> <div class="category-item"> <input type="checkbox" id="cat27" name="categories" value="27" checked> <label for="cat27">Education</label> </div> <div class="category-item"> <input type="checkbox" id="cat28" name="categories" value="28" checked> <label for="cat28">Science & Technology</label> </div> <div class="category-item"> <input type="checkbox" id="cat29" name="categories" value="29" checked> <label for="cat29">Nonprofits & Activism</label> </div> </div> </div> </div> </div> <div class="form-group second-row"> <label for="maxResults">검색 결과 수</label> <select id="maxResults" name="maxResults"> <option value="10">10건 (최소)</option> <option value="20" selected>20건 (기본)</option> <option value="30">30건 (적음)</option> <option value="40">40건 (소량)</option> <option value="50">50건 (적당)</option> <option value="60">60건 (quota 절약)</option> <option value="100">100건 (균형)</option> <option value="150">150건 (많음)</option> <option value="200">200건 (최대)</option> </select> </div> <div class="form-group second-row"> <label for="uploadPeriod">업로드 기간</label> <select id="uploadPeriod" name="uploadPeriod"> <option value="">전체 기간</option> <option value="1day">1일(⏫24시간내10만)</option> <option value="2days">2일(⏫실시간떡상중)</option> <option value="3days">3일(⏫떡상중)</option> <option value="1week">1주일</option> <option value="2weeks">2주일</option> <option value="3weeks">3주일</option> <option value="1month">1개월</option> <option value="3months">3개월</option> <option value="6months">6개월</option> <option value="1year">1년</option> <option value="2years">2년</option> <option value="3years">3년</option> <option value="4years">4년</option> <option value="5years">5년</option> <option value="6years">6년</option> <option value="7years">7년</option> <option value="8years">8년</option> <option value="9years">9년</option> <option value="10years">10년</option> </select> </div> <div class="form-group second-row"> <label for="uploadDateRange">업로드 연도</label> <div class="date-range-container"> <div class="date-input-group"> <input type="date" id="startDate" name="startDate" placeholder="시작일" /> </div> <div class="date-input-group"> <input type="date" id="endDate" name="endDate" placeholder="종료일" /> </div> </div> </div> </div> <!-- 동영상 길이 선택 (별도 섹션으로 분리하여 넓은 공간 확보) --> <div class="video-length-section"> <div class="section-header"> <label class="section-label">동영상 길이</label> <div class="select-controls"> <div class="select-all-container"> <input type="checkbox" id="selectAllVideoLength"> <label for="selectAllVideoLength">모두 선택</label> </div> <div class="select-group-container"> <input type="checkbox" id="selectFirst2VideoLength" checked> <label for="selectFirst2VideoLength">맨 앞 두 개만</label> </div> <div class="select-group-container"> <input type="checkbox" id="selectNext3VideoLength"> <label for="selectNext3VideoLength">그 뒤 세 개만</label> </div> <div class="select-group-container"> <input type="checkbox" id="selectTop5VideoLength"> <label for="selectTop5VideoLength">위 5개 선택</label> </div> <div class="select-group-container"> <input type="checkbox" id="selectBottom5VideoLength"> <label for="selectBottom5VideoLength">밑 5개 선택</label> </div> </div> </div> <div class="video-length-grid"> <div class="checkbox-item"> <input type="checkbox" id="shortForm1" name="videoLength" value="short1" checked> <label for="shortForm1">Short Form1<br><span class="duration-desc">(1분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="shortForm2" name="videoLength" value="short2" checked> <label for="shortForm2">Short Form2<br><span class="duration-desc">(1분 이상 2분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="midForm1" name="videoLength" value="mid1"> <label for="midForm1">Mid Form1<br><span class="duration-desc">(2분 이상 10분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="midForm2" name="videoLength" value="mid2"> <label for="midForm2">Mid Form2<br><span class="duration-desc">(10분 이상 20분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm1" name="videoLength" value="long1"> <label for="longForm1">Long Form1<br><span class="duration-desc">(20분 이상 30분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm2" name="videoLength" value="long2"> <label for="longForm2">Long Form2<br><span class="duration-desc">(30분 이상 40분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm3" name="videoLength" value="long3"> <label for="longForm3">Long Form3<br><span class="duration-desc">(40분 이상 50분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm4" name="videoLength" value="long4"> <label for="longForm4">Long Form4<br><span class="duration-desc">(50분 이상 60분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm5" name="videoLength" value="long5"> <label for="longForm5">Long Form5<br><span class="duration-desc">(60분 이상 90분 미만)</span></label> </div> <div class="checkbox-item"> <input type="checkbox" id="longForm6" name="videoLength" value="long6"> <label for="longForm6">Long Form6<br><span class="duration-desc">(90분 이상)</span></label> </div> </div> </div> <button type="submit" class="search-btn"> 🔍 검색하기 </button> </form> <div id="loadingIndicator" class="loading" style="display: none;"> <div class="spinner"></div> <p>검색 중입니다... 잠시만 기다려주세요.</p> </div> <div id="errorMessage" class="error-message" style="display: none;"></div> <div id="resultsContainer" class="results-container" style="display: none;"> <!-- 결과내 재검색 필터 --> <div id="resultsFilterContainer" class="results-filter-container" style="display: none;"> <div class="filter-header"> <h3>🔍 결과내 재검색 - 업로드 시간대 필터링</h3> <button id="toggleResultsFilter" class="toggle-filter-btn">필터 접기/펼치기</button> </div> <div id="resultsFilterContent" class="filter-content"> <div class="filter-stats"> <p id="filterStats">시간대별 동영상 분포를 분석 중...</p> </div> <div class="timezone-filter-grid"> <div class="filter-group"> <h4>📊 골든타임 (20-23시)</h4> <label> <input type="checkbox" id="filterPrimeTime" checked> <span id="primeTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌅 아침시간 (06-09시)</h4> <label> <input type="checkbox" id="filterMorningCommute" checked> <span id="morningCommuteCount">0개</span> </label> </div> <div class="filter-group"> <h4>🍱 점심시간 (12-14시)</h4> <label> <input type="checkbox" id="filterLunchTime" checked> <span id="lunchTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌆 퇴근시간 (18-20시)</h4> <label> <input type="checkbox" id="filterEveningCommute" checked> <span id="eveningCommuteCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌙 심야시간 (23-02시)</h4> <label> <input type="checkbox" id="filterLateNight" checked> <span id="lateNightCount">0개</span> </label> </div> <div class="filter-group"> <h4>💼 업무시간 (09-18시)</h4> <label> <input type="checkbox" id="filterWorkTime" checked> <span id="workTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🎉 주말</h4> <label> <input type="checkbox" id="filterWeekend" checked> <span id="weekendCount">0개</span> </label> </div> <div class="filter-group"> <h4>📅 평일</h4> <label> <input type="checkbox" id="filterWeekday" checked> <span id="weekdayCount">0개</span> </label> </div> <div class="filter-group"> <h4>☀️ 오전시간 (09-12시)</h4> <label> <input type="checkbox" id="filterMorningTime" checked> <span id="morningTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌇 오후시간 (14-18시)</h4> <label> <input type="checkbox" id="filterAfternoonTime" checked> <span id="afternoonTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌃 저녁시간 (20-23시)</h4> <label> <input type="checkbox" id="filterEveningTime" checked> <span id="eveningTimeCount">0개</span> </label> </div> <div class="filter-group"> <h4>🌌 새벽시간 (02-06시)</h4> <label> <input type="checkbox" id="filterEarlyMorningTime" checked> <span id="earlyMorningTimeCount">0개</span> </label> </div> </div> <div class="filter-actions"> <button id="applyTimezoneFilter" class="apply-filter-btn">필터 적용</button> <button id="resetTimezoneFilter" class="reset-filter-btn">모두 해제</button> <button id="selectBestTimes" class="best-times-btn">떡상 시간대만 선택</button> </div> </div> </div> <div class="results-header"> <div class="results-info"> <div class="datetime-display"> <div class="analog-clock" id="analogClock"> <div class="clock-numbers"> <div class="clock-number n12">12</div> <div class="clock-number n3">3</div> <div class="clock-number n6">6</div> <div class="clock-number n9">9</div> </div> <div class="clock-hand hour-hand" id="hourHand"></div> <div class="clock-hand minute-hand" id="minuteHand"></div> <div class="clock-hand second-hand" id="secondHand"></div> <div class="clock-center"></div> </div> </div> <div class="search-results-info"> <span id="resultsCount" class="results-count-number">0</span><span id="totalResultsInfo" style="display: none;">/<span id="totalCount" class="results-count-number">0</span></span> 개의 결과가 검색되었습니다. <span id="searchKeywordInfo" style="display: none;">&nbsp;&nbsp; <span id="searchKeyword" class="results-count-number"></span></span> </div> </div> <div class="results-controls"> <div class="pagination-controls"> <label>(구독자수: 만 단위) &nbsp;&nbsp; </label> <select id="itemsPerPage"> <option value="10">10개</option> <option value="20">20개</option> <option value="30" selected>30개</option> <option value="40">40개</option> <option value="50">50개</option> <option value="100">100개</option> <option value="150">150개</option> <option value="200">200개</option> </select> </div> </div> <div class="excel-download-container"> <button id="downloadExcelBtn" class="excel-download-btn" style="display: none;" title="클릭하면 저장 위치를 선택할 수 있습니다 (Chrome/Edge 86+ 지원)"> <span id="excelBtnPrefix"></span><span id="excelBtnIcon">📊</span><span id="excelBtnSuffix"></span> </button> </div> </div> <div class="table-container"> <table class="results-table"> <thead> <tr> <th data-sort="thumbnail_url">👍</th> <th class="sortable multi-sort"> <span data-sort="youtube_channel_name" class="sort-icon">✨</span> <span data-sort="channel_created_date" class="sort-icon">📅</span> </th> <th data-sort="title" class="sortable">📽️</th> <th class="sortable multi-sort"> <span data-sort="primary_category" class="sort-icon">🌈</span> <span data-sort="channel_playback_rpm" class="sort-icon">💰</span> </th> <th data-sort="country" class="sortable">🏳️‍🌈</th> <th data-sort="status_date" class="sortable" id="uploadDateHeader">rpm-estimate/th> <th data-sort="korea_time" class="sortable" id="koreaTimeHeader">🏠</th> <th data-sort="likes" class="sortable">💛</th> <th data-sort="daily_view_count" class="sortable">👓</th> <th data-sort="subscriber_count" class="sortable">👪</th> <th data-sort="estimated_rpm" class="sortable">💰</th> <th data-sort="vod_url">▶️</th> <th data-sort="duration" class="sortable">⏰</th> <th>👍</th> </tr> </thead> <tbody id="resultsTableBody"> </tbody> </table> </div> <div class="pagination" id="pagination"> </div> </div> </div> <script> let searchResults = []; let currentPage = 1; let itemsPerPage = 30; let sortColumn = 'daily_view_count'; let sortDirection = 'desc'; // 검색 폼 제출 이벤트 document.getElementById('searchForm').addEventListener('submit', async (e) => { e.preventDefault(); await performSearch(); }); // 검색 범위 이벤트들은 initializeApp에서 등록됨 // 검색 범위 디스플레이 업데이트 함수 function updateSearchScopeDisplay() { const searchScopeCheckboxes = document.querySelectorAll('input[name="searchScope"]:checked'); const display = document.getElementById('searchScopeDisplay'); if (searchScopeCheckboxes.length === 0) { display.textContent = '검색 범위를 선택해주세요'; } else if (searchScopeCheckboxes.length === document.querySelectorAll('input[name="searchScope"]').length) { display.textContent = '모든 범위 선택됨'; } else { const selectedNames = Array.from(searchScopeCheckboxes).map(cb => { const label = cb.parentElement.querySelector('label'); return label.textContent; }); display.textContent = selectedNames.join(', ') + ' 선택됨'; } } // 페이지 로드 시 초기 상태 설정 updateSearchScopeDisplay(); // 모든 검색 범위 체크박스 상태 업데이트 function updateSelectAllSearchScope() { const searchScopeCheckboxes = document.querySelectorAll('input[name="searchScope"]'); const checkedSearchScope = document.querySelectorAll('input[name="searchScope"]:checked'); const selectAllCheckbox = document.getElementById('selectAllSearchScope'); if (checkedSearchScope.length === 0) { selectAllCheckbox.checked = false; selectAllCheckbox.indeterminate = false; } else if (checkedSearchScope.length === searchScopeCheckboxes.length) { selectAllCheckbox.checked = true; selectAllCheckbox.indeterminate = false; } else { selectAllCheckbox.checked = false; selectAllCheckbox.indeterminate = true; } } // 카테고리 드롭다운 기능은 DOMContentLoaded 이벤트에서 설정됨 // 문서 클릭 시 드롭다운 닫기 document.addEventListener('click', (e) => { // 검색 범위 드롭다운 처리 const searchScopeDisplay = document.getElementById('searchScopeDisplay'); const searchScopeDropdown = document.getElementById('searchScopeDropdown'); if (searchScopeDisplay && searchScopeDropdown) { const searchScopeSelector = searchScopeDisplay.closest('.category-selector'); if (searchScopeSelector && !searchScopeSelector.contains(e.target)) { searchScopeDropdown.classList.remove('show'); } } // 카테고리 드롭다운 처리 const categoryDisplay = document.getElementById('categoryDisplay'); const categoryDropdown = document.getElementById('categoryDropdown'); if (categoryDisplay && categoryDropdown) { const categorySelector = categoryDisplay.closest('.category-selector'); if (categorySelector && !categorySelector.contains(e.target)) { categoryDropdown.classList.remove('show'); } } // 국가 드롭다운 처리 (새로 추가) const countryDisplay = document.getElementById('countryDisplay'); const countryDropdown = document.getElementById('countryDropdown'); if (countryDisplay && countryDropdown) { const countrySelector = countryDisplay.closest('.category-selector'); if (countrySelector && !countrySelector.contains(e.target)) { countryDropdown.classList.remove('show'); } } }); // 카테고리 이벤트들은 initializeApp에서 등록됨 // 카테고리 디스플레이 업데이트 함수 function updateCategoryDisplay() { const categoryCheckboxes = document.querySelectorAll('input[name="categories"]:checked'); const display = document.getElementById('categoryDisplay'); if (categoryCheckboxes.length === 0) { display.textContent = '카테고리를 선택해주세요'; } else if (categoryCheckboxes.length === document.querySelectorAll('input[name="categories"]').length) { display.textContent = '모든 카테고리 선택됨'; } else if (categoryCheckboxes.length <= 3) { const selectedNames = Array.from(categoryCheckboxes).map(cb => { const label = cb.parentElement.querySelector('label'); return label.textContent; }); display.textContent = selectedNames.join(', '); } else { display.textContent = `${categoryCheckboxes.length}개 카테고리 선택됨`; } } // 모든 카테고리 체크박스 상태 업데이트 function updateSelectAllCategories() { const categoryCheckboxes = document.querySelectorAll('input[name="categories"]'); const checkedCategories = document.querySelectorAll('input[name="categories"]:checked'); const selectAllCheckbox = document.getElementById('selectAllCategories'); if (checkedCategories.length === 0) { selectAllCheckbox.checked = false; selectAllCheckbox.indeterminate = false; } else if (checkedCategories.length === categoryCheckboxes.length) { selectAllCheckbox.checked = true; selectAllCheckbox.indeterminate = false; } else { selectAllCheckbox.checked = false; selectAllCheckbox.indeterminate = true; } } // 썸네일 다운로드 함수 (파일명 안전화 처리) async function downloadThumbnail(url, channelName) { try { console.log('📥 썸네일 다운로드 시작:', { url, channelName }); // 채널명을 안전한 파일명으로 변환 (서버 측과 동일한 로직) let safeChannelName = channelName || 'channel'; // 특수문자 및 유니코드 문자 처리 safeChannelName = safeChannelName .normalize('NFD') // 유니코드 정규화 .replace(/[\u0300-\u036f]/g, '') // 발음 기호 제거 .replace(/[^\x00-\x7F]/g, '') // ASCII가 아닌 문자 제거 (한글, 이모지 등) .replace(/[<>:"/\\|?*\x00-\x1f]/g, '_') // 파일명에 사용 불가한 문자들 제거 .replace(/["'`]/g, '') // 따옴표 제거 .replace(/\s+/g, '_') // 공백을 언더스코어로 변경 .replace(/_{2,}/g, '_') // 연속된 언더스코어를 하나로 변경 .replace(/^_+|_+$/g, '') // 앞뒤 언더스코어 제거 .substring(0, 50); // 파일명 길이 제한 (클라이언트에서는 더 짧게) // 파일명이 비어있으면 기본값 설정 if (!safeChannelName || safeChannelName.length === 0) { safeChannelName = 'channel'; } // 현재 날짜시간을 파일명에 추가 (중복 방지) const now = new Date(); const year = now.getFullYear().toString().slice(-2); // 뒤 2자리만 (25) const month = (now.getMonth() + 1).toString().padStart(2, '0'); const day = now.getDate().toString().padStart(2, '0'); const hour = now.getHours().toString().padStart(2, '0'); const minute = now.getMinutes().toString().padStart(2, '0'); const second = now.getSeconds().toString().padStart(2, '0'); const millisecond = now.getMilliseconds().toString().padStart(3, '0'); const timestamp = `${year}${month}${day}${hour}${minute}${second}${millisecond}`; const filename = `${safeChannelName}_${timestamp}.jpg`; console.log('🔧 파일명 변환:', { original: channelName, safe: safeChannelName, final: filename }); // 최신 브라우저에서 File System Access API 지원 확인 if ('showSaveFilePicker' in window) { // File System Access API 사용 (Chrome 86+, Edge 86+) await downloadWithFilePicker(url, filename); } else if ('showDirectoryPicker' in window) { // Directory Picker API 사용 (대체 방법) await downloadWithDirectoryPicker(url, filename, channelName); } else { // 기존 방식 (자동 다운로드) - 브라우저 호환성을 위한 fallback await downloadWithTraditionalMethod(url, filename); } } catch (error) { console.error('다운로드 오류:', error); // 구체적인 오류 메시지 제공 if (error.message.includes('Content-Disposition') || error.message.includes('ERR_INVALID_CHAR') || error.message.includes('Invalid character in header')) { alert(`❌ 파일명 오류: 채널명에 특수문자가 포함되어 다운로드에 실패했습니다.\n\n원인: "${channelName}"에 HTTP 헤더에서 허용되지 않는 문자가 포함되어 있습니다.\n해결: 파일명이 자동으로 안전한 형태로 변환되었지만 서버에서 처리하지 못했습니다.\n\n다시 시도해 주세요.`); } else if (error.name === 'AbortError') { console.log('사용자가 다운로드를 취소했습니다.'); } else { alert(`❌ 썸네일 다운로드에 실패했습니다.\n\n오류: ${error.message}\n\n가능한 원인:\n- 네트워크 연결 문제\n- 썸네일 이미지 서버 접근 불가\n- 파일명 처리 오류\n\n잠시 후 다시 시도해 주세요.`); } } } // File System Access API를 사용한 파일 저장 (���선된 버전) async function downloadWithFilePicker(url, filename) { try { // 파일 저장 위치 선택 다이얼로그 표시 const fileHandle = await window.showSaveFilePicker({ suggestedName: filename, types: [{ description: '이미지 파일', accept: { 'image/jpeg': ['.jpg', '.jpeg'], 'image/png': ['.png'], 'image/webp': ['.webp'] } }] }); // URL 인코딩을 안전하게 처리 const encodedUrl = encodeURIComponent(url); const encodedFilename = encodeURIComponent(filename); console.log('🔄 서버 요청:', { url: `/api/download-thumbnail?url=${encodedUrl}&filename=${encodedFilename}`, originalUrl: url, originalFilename: filename }); const response = await fetch(`/api/download-thumbnail?url=${encodedUrl}&filename=${encodedFilename}`); if (!response.ok) { const errorText = await response.text(); let errorData; try { errorData = JSON.parse(errorText); } catch { errorData = { error: errorText }; } throw new Error(`서버 오류 (${response.status}): ${errorData.error || 'Unknown error'}`); } const blob = await response.blob(); // 선택한 위치에 파일 저장 const writable = await fileHandle.createWritable(); await writable.write(blob); await writable.close(); console.log(`✅ 썸네일 저장 완료: ${filename}`); alert(`✅ 썸네일이 선택한 위치에 저장되었습니다!\n\n파일명: ${filename}\n크기: ${(blob.size / 1024).toFixed(1)} KB`); } catch (error) { if (error.name === 'AbortError') { console.log('사용자가 저장을 취소했습니다.'); } else { console.error('File System Access API 다운로드 오류:', error); throw error; } } } // Directory Picker API를 사용한 폴더 선택 저장 async function downloadWithDirectoryPicker(url, filename, channelName) { try { // 폴더 선택 다이얼로그 표시 const dirHandle = await window.showDirectoryPicker(); // 썸네일 이미지 다운로드 const response = await fetch(`/api/download-thumbnail?url=${encodeURIComponent(url)}&filename=${encodeURIComponent(filename)}`); // 서버에서 전송한 로그를 콘솔에 출력 const downloadLog = response.headers.get('X-Download-Log'); if (downloadLog) { try { const logData = JSON.parse(downloadLog); console.log(`📥 썸네일 다운로드 로그: ${logData.message}`); // 오류가 있는 경우 상세 정보 출력 if (logData.step === 'error') { console.error(`❌ 썸네일 다운로드 실패: ${logData.error}`); console.error(`📋 상세 정보: ${logData.details}`); console.error(`🔗 URL: ... Result too long, truncated to 100000 characters``

이제 JavaScript 부분을 찾았으므로 검색 키워드 표시 기능을 추가하겠습니다. 검색 폼 제출 이벤트 리스너 바로 다음에 `performSearch` 함수를 찾아서 수정해보겠습니다.

F

Edit file

요청

``{ `path`: `H:\\workspace\\you001_time1\\you_list.html`, `edits`: [ { `newText`: ` // 검색 폼 제출 이벤트 document.getElementById('searchForm').addEventListener('submit', async (e) => { e.preventDefault(); await performSearch(); }); // 검색 실행 함수 async function performSearch() { try { // 검색 시작 시 키워드 저장 및 표시 const keyword = document.getElementById('keyword').value || ''; updateSearchKeywordDisplay(keyword); // 기존 검색 로직 계속... // (여기서 실제 검색 API 호출 등이 이루어집니다) } catch (error) { console.error('검색 오류:', error); } } // 검색 키워드 표시 업데이트 함수 function updateSearchKeywordDisplay(keyword) { const searchKeywordInfo = document.getElementById('searchKeywordInfo'); const searchKeywordElement = document.getElementById('searchKeyword'); if (keyword && keyword.trim()) { searchKeywordElement.textContent = keyword.trim(); searchKeywordInfo.style.display = 'inline'; console.log('🔍 검색 키워드 표시:', keyword.trim()); } else { searchKeywordInfo.style.display = 'none'; console.log('🔍 검색 키워드 없음 - 키워드 표시 숨김'); } }`, `oldText`: ` // 검색 폼 제출 이벤트 document.getElementById('searchForm').addEventListener('submit', async (e) => { e.preventDefault(); await performSearch(); });` } ], `dryRun`: true }``

응답

` ```diff Index: H:\workspace\you001_time1\you_list.html =================================================================== --- H:\workspace\you001_time1\you_list.html original +++ H:\workspace\you001_time1\you_list.html modified @@ -2375,10 +2375,40 @@ e.preventDefault(); await performSearch(); }); + // 검색 실행 함수 + async function performSearch() { + try { + // 검색 시작 시 키워드 저장 및 표시 + const keyword = document.getElementById('keyword').value || ''; + updateSearchKeywordDisplay(keyword); + + // 기존 검색 로직 계속... + // (여기서 실제 검색 API 호출 등이 이루어집니다) + + } catch (error) { + console.error('검색 오류:', error); + } + } + + // 검색 키워드 표시 업데이트 함수 + function updateSearchKeywordDisplay(keyword) { + const searchKeywordInfo = document.getElementById('searchKeywordInfo'); + const searchKeywordElement = document.getElementById('searchKeyword'); + + if (keyword && keyword.trim()) { + searchKeywordElement.textContent = keyword.trim(); + searchKeywordInfo.style.display = 'inline'; + console.log('🔍 검색 키워드 표시:', keyword.trim()); + } else { + searchKeywordInfo.style.display = 'none'; + console.log('🔍 검색 키워드 없음 - 키워드 표시 숨김'); + } + } + // 검색 범위 이벤트들은 initializeApp에서 등록됨 // 검색 범위 디스플레이 업데이트 함수 function updateSearchScopeDisplay() { ``` `

실제 `performSearch` 함수가 이미 다른 곳에 있을 것 같습니다. 기존 함수를 덮어쓰지 않고 수정하겠습니다. 먼저 실제 `performSearch` 함수가 있는지 확인해보겠습니다.
